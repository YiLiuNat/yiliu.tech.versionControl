{"ast":null,"code":"/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */\n(function (window, document, Math) {\n  var rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n    window.setTimeout(callback, 1000 / 60);\n  };\n\n  var utils = function () {\n    var me = {};\n    var _elementStyle = document.createElement('div').style;\n\n    var _vendor = function () {\n      var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\n          transform,\n          i = 0,\n          l = vendors.length;\n\n      for (; i < l; i++) {\n        transform = vendors[i] + 'ransform';\n        if (transform in _elementStyle) return vendors[i].substr(0, vendors[i].length - 1);\n      }\n\n      return false;\n    }();\n\n    function _prefixStyle(style) {\n      if (_vendor === false) return false;\n      if (_vendor === '') return style;\n      return _vendor + style.charAt(0).toUpperCase() + style.substr(1);\n    }\n\n    me.getTime = Date.now || function getTime() {\n      return new Date().getTime();\n    };\n\n    me.extend = function (target, obj) {\n      for (var i in obj) {\n        target[i] = obj[i];\n      }\n    };\n\n    me.addEvent = function (el, type, fn, capture) {\n      el.addEventListener(type, fn, !!capture);\n    };\n\n    me.removeEvent = function (el, type, fn, capture) {\n      el.removeEventListener(type, fn, !!capture);\n    };\n\n    me.prefixPointerEvent = function (pointerEvent) {\n      return window.MSPointerEvent ? 'MSPointer' + pointerEvent.charAt(7).toUpperCase() + pointerEvent.substr(8) : pointerEvent;\n    };\n\n    me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {\n      var distance = current - start,\n          speed = Math.abs(distance) / time,\n          destination,\n          duration;\n      deceleration = deceleration === undefined ? 0.0006 : deceleration;\n      destination = current + speed * speed / (2 * deceleration) * (distance < 0 ? -1 : 1);\n      duration = speed / deceleration;\n\n      if (destination < lowerMargin) {\n        destination = wrapperSize ? lowerMargin - wrapperSize / 2.5 * (speed / 8) : lowerMargin;\n        distance = Math.abs(destination - current);\n        duration = distance / speed;\n      } else if (destination > 0) {\n        destination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n        distance = Math.abs(current) + destination;\n        duration = distance / speed;\n      }\n\n      return {\n        destination: Math.round(destination),\n        duration: duration\n      };\n    };\n\n    var _transform = _prefixStyle('transform');\n\n    me.extend(me, {\n      hasTransform: _transform !== false,\n      hasPerspective: _prefixStyle('perspective') in _elementStyle,\n      hasTouch: 'ontouchstart' in window,\n      hasPointer: !!(window.PointerEvent || window.MSPointerEvent),\n      // IE10 is prefixed\n      hasTransition: _prefixStyle('transition') in _elementStyle\n    });\n    /*\r\n    This should find all Android browsers lower than build 535.19 (both stock browser and webview)\r\n    - galaxy S2 is ok\r\n       - 2.3.6 : `AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`\r\n       - 4.0.4 : `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\r\n      - galaxy S3 is badAndroid (stock brower, webview)\r\n        `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\r\n      - galaxy S4 is badAndroid (stock brower, webview)\r\n        `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\r\n      - galaxy S5 is OK\r\n        `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`\r\n      - galaxy S6 is OK\r\n        `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`\r\n     */\n\n    me.isBadAndroid = function () {\n      var appVersion = window.navigator.appVersion; // Android browser is not a chrome browser.\n\n      if (/Android/.test(appVersion) && !/Chrome\\/\\d/.test(appVersion)) {\n        var safariVersion = appVersion.match(/Safari\\/(\\d+.\\d)/);\n\n        if (safariVersion && typeof safariVersion === \"object\" && safariVersion.length >= 2) {\n          return parseFloat(safariVersion[1]) < 535.19;\n        } else {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    }();\n\n    me.extend(me.style = {}, {\n      transform: _transform,\n      transitionTimingFunction: _prefixStyle('transitionTimingFunction'),\n      transitionDuration: _prefixStyle('transitionDuration'),\n      transitionDelay: _prefixStyle('transitionDelay'),\n      transformOrigin: _prefixStyle('transformOrigin'),\n      touchAction: _prefixStyle('touchAction')\n    });\n\n    me.hasClass = function (e, c) {\n      var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\n      return re.test(e.className);\n    };\n\n    me.addClass = function (e, c) {\n      if (me.hasClass(e, c)) {\n        return;\n      }\n\n      var newclass = e.className.split(' ');\n      newclass.push(c);\n      e.className = newclass.join(' ');\n    };\n\n    me.removeClass = function (e, c) {\n      if (!me.hasClass(e, c)) {\n        return;\n      }\n\n      var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\n      e.className = e.className.replace(re, ' ');\n    };\n\n    me.offset = function (el) {\n      var left = -el.offsetLeft,\n          top = -el.offsetTop; // jshint -W084\n\n      while (el = el.offsetParent) {\n        left -= el.offsetLeft;\n        top -= el.offsetTop;\n      } // jshint +W084\n\n\n      return {\n        left: left,\n        top: top\n      };\n    };\n\n    me.preventDefaultException = function (el, exceptions) {\n      for (var i in exceptions) {\n        if (exceptions[i].test(el[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    me.extend(me.eventType = {}, {\n      touchstart: 1,\n      touchmove: 1,\n      touchend: 1,\n      mousedown: 2,\n      mousemove: 2,\n      mouseup: 2,\n      pointerdown: 3,\n      pointermove: 3,\n      pointerup: 3,\n      MSPointerDown: 3,\n      MSPointerMove: 3,\n      MSPointerUp: 3\n    });\n    me.extend(me.ease = {}, {\n      quadratic: {\n        style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n        fn: function (k) {\n          return k * (2 - k);\n        }\n      },\n      circular: {\n        style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\n        // Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\n        fn: function (k) {\n          return Math.sqrt(1 - --k * k);\n        }\n      },\n      back: {\n        style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n        fn: function (k) {\n          var b = 4;\n          return (k = k - 1) * k * ((b + 1) * k + b) + 1;\n        }\n      },\n      bounce: {\n        style: '',\n        fn: function (k) {\n          if ((k /= 1) < 1 / 2.75) {\n            return 7.5625 * k * k;\n          } else if (k < 2 / 2.75) {\n            return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n          } else if (k < 2.5 / 2.75) {\n            return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n          } else {\n            return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n          }\n        }\n      },\n      elastic: {\n        style: '',\n        fn: function (k) {\n          var f = 0.22,\n              e = 0.4;\n\n          if (k === 0) {\n            return 0;\n          }\n\n          if (k == 1) {\n            return 1;\n          }\n\n          return e * Math.pow(2, -10 * k) * Math.sin((k - f / 4) * (2 * Math.PI) / f) + 1;\n        }\n      }\n    });\n\n    me.tap = function (e, eventName) {\n      var ev = document.createEvent('Event');\n      ev.initEvent(eventName, true, true);\n      ev.pageX = e.pageX;\n      ev.pageY = e.pageY;\n      e.target.dispatchEvent(ev);\n    };\n\n    me.click = function (e) {\n      var target = e.target,\n          ev;\n\n      if (!/(SELECT|INPUT|TEXTAREA)/i.test(target.tagName)) {\n        // https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent\n        // initMouseEvent is deprecated.\n        ev = document.createEvent(window.MouseEvent ? 'MouseEvents' : 'Event');\n        ev.initEvent('click', true, true);\n        ev.view = e.view || window;\n        ev.detail = 1;\n        ev.screenX = target.screenX || 0;\n        ev.screenY = target.screenY || 0;\n        ev.clientX = target.clientX || 0;\n        ev.clientY = target.clientY || 0;\n        ev.ctrlKey = !!e.ctrlKey;\n        ev.altKey = !!e.altKey;\n        ev.shiftKey = !!e.shiftKey;\n        ev.metaKey = !!e.metaKey;\n        ev.button = 0;\n        ev.relatedTarget = null;\n        ev._constructed = true;\n        target.dispatchEvent(ev);\n      }\n    };\n\n    me.getTouchAction = function (eventPassthrough, addPinch) {\n      var touchAction = 'none';\n\n      if (eventPassthrough === 'vertical') {\n        touchAction = 'pan-y';\n      } else if (eventPassthrough === 'horizontal') {\n        touchAction = 'pan-x';\n      }\n\n      if (addPinch && touchAction != 'none') {\n        // add pinch-zoom support if the browser supports it, but if not (eg. Chrome <55) do nothing\n        touchAction += ' pinch-zoom';\n      }\n\n      return touchAction;\n    };\n\n    me.getRect = function (el) {\n      if (el instanceof SVGElement) {\n        var rect = el.getBoundingClientRect();\n        return {\n          top: rect.top,\n          left: rect.left,\n          width: rect.width,\n          height: rect.height\n        };\n      } else {\n        return {\n          top: el.offsetTop,\n          left: el.offsetLeft,\n          width: el.offsetWidth,\n          height: el.offsetHeight\n        };\n      }\n    };\n\n    return me;\n  }();\n\n  function IScroll(el, options) {\n    this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\n    this.scroller = this.wrapper.children[0];\n    this.scrollerStyle = this.scroller.style; // cache style for better performance\n\n    this.options = {\n      resizeScrollbars: true,\n      mouseWheelSpeed: 20,\n      snapThreshold: 0.334,\n      // INSERT POINT: OPTIONS\n      disablePointer: !utils.hasPointer,\n      disableTouch: utils.hasPointer || !utils.hasTouch,\n      disableMouse: utils.hasPointer || utils.hasTouch,\n      startX: 0,\n      startY: 0,\n      scrollY: true,\n      directionLockThreshold: 5,\n      momentum: true,\n      bounce: true,\n      bounceTime: 600,\n      bounceEasing: '',\n      preventDefault: true,\n      preventDefaultException: {\n        tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/\n      },\n      HWCompositing: true,\n      useTransition: true,\n      useTransform: true,\n      bindToWrapper: typeof window.onmousedown === \"undefined\"\n    };\n\n    for (var i in options) {\n      this.options[i] = options[i];\n    } // Normalize options\n\n\n    this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\n    this.options.useTransition = utils.hasTransition && this.options.useTransition;\n    this.options.useTransform = utils.hasTransform && this.options.useTransform;\n    this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault; // If you want eventPassthrough I have to lock one of the axes\n\n    this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\n    this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX; // With eventPassthrough we also need lockDirection mechanism\n\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n    this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\n    this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\n\n    if (this.options.tap === true) {\n      this.options.tap = 'tap';\n    } // https://github.com/cubiq/iscroll/issues/1029\n\n\n    if (!this.options.useTransition && !this.options.useTransform) {\n      if (!/relative|absolute/i.test(this.scrollerStyle.position)) {\n        this.scrollerStyle.position = \"relative\";\n      }\n    }\n\n    if (this.options.shrinkScrollbars == 'scale') {\n      this.options.useTransition = false;\n    }\n\n    this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1; // INSERT POINT: NORMALIZATION\n    // Some defaults\n\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this._events = {}; // INSERT POINT: DEFAULTS\n\n    this._init();\n\n    this.refresh();\n    this.scrollTo(this.options.startX, this.options.startY);\n    this.enable();\n  }\n\n  IScroll.prototype = {\n    version: '5.2.0-snapshot',\n    _init: function () {\n      this._initEvents();\n\n      if (this.options.scrollbars || this.options.indicators) {\n        this._initIndicators();\n      }\n\n      if (this.options.mouseWheel) {\n        this._initWheel();\n      }\n\n      if (this.options.snap) {\n        this._initSnap();\n      }\n\n      if (this.options.keyBindings) {\n        this._initKeys();\n      } // INSERT POINT: _init\n\n    },\n    destroy: function () {\n      this._initEvents(true);\n\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = null;\n\n      this._execEvent('destroy');\n    },\n    _transitionEnd: function (e) {\n      if (e.target != this.scroller || !this.isInTransition) {\n        return;\n      }\n\n      this._transitionTime();\n\n      if (!this.resetPosition(this.options.bounceTime)) {\n        this.isInTransition = false;\n\n        this._execEvent('scrollEnd');\n      }\n    },\n    _start: function (e) {\n      // React to left mouse button only\n      if (utils.eventType[e.type] != 1) {\n        // for button property\n        // http://unixpapa.com/js/mouse.html\n        var button;\n\n        if (!e.which) {\n          /* IE case */\n          button = e.button < 2 ? 0 : e.button == 4 ? 1 : 2;\n        } else {\n          /* All others */\n          button = e.button;\n        }\n\n        if (button !== 0) {\n          return;\n        }\n      }\n\n      if (!this.enabled || this.initiated && utils.eventType[e.type] !== this.initiated) {\n        return;\n      }\n\n      if (this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {\n        e.preventDefault();\n      }\n\n      var point = e.touches ? e.touches[0] : e,\n          pos;\n      this.initiated = utils.eventType[e.type];\n      this.moved = false;\n      this.distX = 0;\n      this.distY = 0;\n      this.directionX = 0;\n      this.directionY = 0;\n      this.directionLocked = 0;\n      this.startTime = utils.getTime();\n\n      if (this.options.useTransition && this.isInTransition) {\n        this._transitionTime();\n\n        this.isInTransition = false;\n        pos = this.getComputedPosition();\n\n        this._translate(Math.round(pos.x), Math.round(pos.y));\n\n        this._execEvent('scrollEnd');\n      } else if (!this.options.useTransition && this.isAnimating) {\n        this.isAnimating = false;\n\n        this._execEvent('scrollEnd');\n      }\n\n      this.startX = this.x;\n      this.startY = this.y;\n      this.absStartX = this.x;\n      this.absStartY = this.y;\n      this.pointX = point.pageX;\n      this.pointY = point.pageY;\n\n      this._execEvent('beforeScrollStart');\n    },\n    _move: function (e) {\n      if (!this.enabled || utils.eventType[e.type] !== this.initiated) {\n        return;\n      }\n\n      if (this.options.preventDefault) {\n        // increases performance on Android? TODO: check!\n        e.preventDefault();\n      }\n\n      var point = e.touches ? e.touches[0] : e,\n          deltaX = point.pageX - this.pointX,\n          deltaY = point.pageY - this.pointY,\n          timestamp = utils.getTime(),\n          newX,\n          newY,\n          absDistX,\n          absDistY;\n      this.pointX = point.pageX;\n      this.pointY = point.pageY;\n      this.distX += deltaX;\n      this.distY += deltaY;\n      absDistX = Math.abs(this.distX);\n      absDistY = Math.abs(this.distY); // We need to move at least 10 pixels for the scrolling to initiate\n\n      if (timestamp - this.endTime > 300 && absDistX < 10 && absDistY < 10) {\n        return;\n      } // If you are scrolling in one direction lock the other\n\n\n      if (!this.directionLocked && !this.options.freeScroll) {\n        if (absDistX > absDistY + this.options.directionLockThreshold) {\n          this.directionLocked = 'h'; // lock horizontally\n        } else if (absDistY >= absDistX + this.options.directionLockThreshold) {\n          this.directionLocked = 'v'; // lock vertically\n        } else {\n          this.directionLocked = 'n'; // no lock\n        }\n      }\n\n      if (this.directionLocked == 'h') {\n        if (this.options.eventPassthrough == 'vertical') {\n          e.preventDefault();\n        } else if (this.options.eventPassthrough == 'horizontal') {\n          this.initiated = false;\n          return;\n        }\n\n        deltaY = 0;\n      } else if (this.directionLocked == 'v') {\n        if (this.options.eventPassthrough == 'horizontal') {\n          e.preventDefault();\n        } else if (this.options.eventPassthrough == 'vertical') {\n          this.initiated = false;\n          return;\n        }\n\n        deltaX = 0;\n      }\n\n      deltaX = this.hasHorizontalScroll ? deltaX : 0;\n      deltaY = this.hasVerticalScroll ? deltaY : 0;\n      newX = this.x + deltaX;\n      newY = this.y + deltaY; // Slow down if outside of the boundaries\n\n      if (newX > 0 || newX < this.maxScrollX) {\n        newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n      }\n\n      if (newY > 0 || newY < this.maxScrollY) {\n        newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n      }\n\n      this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n      this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n      if (!this.moved) {\n        this._execEvent('scrollStart');\n      }\n\n      this.moved = true;\n\n      this._translate(newX, newY);\n      /* REPLACE START: _move */\n\n\n      if (timestamp - this.startTime > 300) {\n        this.startTime = timestamp;\n        this.startX = this.x;\n        this.startY = this.y;\n      }\n      /* REPLACE END: _move */\n\n    },\n    _end: function (e) {\n      if (!this.enabled || utils.eventType[e.type] !== this.initiated) {\n        return;\n      }\n\n      if (this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException)) {\n        e.preventDefault();\n      }\n\n      var point = e.changedTouches ? e.changedTouches[0] : e,\n          momentumX,\n          momentumY,\n          duration = utils.getTime() - this.startTime,\n          newX = Math.round(this.x),\n          newY = Math.round(this.y),\n          distanceX = Math.abs(newX - this.startX),\n          distanceY = Math.abs(newY - this.startY),\n          time = 0,\n          easing = '';\n      this.isInTransition = 0;\n      this.initiated = 0;\n      this.endTime = utils.getTime(); // reset if we are outside of the boundaries\n\n      if (this.resetPosition(this.options.bounceTime)) {\n        return;\n      }\n\n      this.scrollTo(newX, newY); // ensures that the last position is rounded\n      // we scrolled less than 10 pixels\n\n      if (!this.moved) {\n        if (this.options.tap) {\n          utils.tap(e, this.options.tap);\n        }\n\n        if (this.options.click) {\n          utils.click(e);\n        }\n\n        this._execEvent('scrollCancel');\n\n        return;\n      }\n\n      if (this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100) {\n        this._execEvent('flick');\n\n        return;\n      } // start momentum animation if needed\n\n\n      if (this.options.momentum && duration < 300) {\n        momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\n          destination: newX,\n          duration: 0\n        };\n        momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\n          destination: newY,\n          duration: 0\n        };\n        newX = momentumX.destination;\n        newY = momentumY.destination;\n        time = Math.max(momentumX.duration, momentumY.duration);\n        this.isInTransition = 1;\n      }\n\n      if (this.options.snap) {\n        var snap = this._nearestSnap(newX, newY);\n\n        this.currentPage = snap;\n        time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(newX - snap.x), 1000), Math.min(Math.abs(newY - snap.y), 1000)), 300);\n        newX = snap.x;\n        newY = snap.y;\n        this.directionX = 0;\n        this.directionY = 0;\n        easing = this.options.bounceEasing;\n      } // INSERT POINT: _end\n\n\n      if (newX != this.x || newY != this.y) {\n        // change easing function when scroller goes out of the boundaries\n        if (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\n          easing = utils.ease.quadratic;\n        }\n\n        this.scrollTo(newX, newY, time, easing);\n        return;\n      }\n\n      this._execEvent('scrollEnd');\n    },\n    _resize: function () {\n      var that = this;\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = setTimeout(function () {\n        that.refresh();\n      }, this.options.resizePolling);\n    },\n    resetPosition: function (time) {\n      var x = this.x,\n          y = this.y;\n      time = time || 0;\n\n      if (!this.hasHorizontalScroll || this.x > 0) {\n        x = 0;\n      } else if (this.x < this.maxScrollX) {\n        x = this.maxScrollX;\n      }\n\n      if (!this.hasVerticalScroll || this.y > 0) {\n        y = 0;\n      } else if (this.y < this.maxScrollY) {\n        y = this.maxScrollY;\n      }\n\n      if (x == this.x && y == this.y) {\n        return false;\n      }\n\n      this.scrollTo(x, y, time, this.options.bounceEasing);\n      return true;\n    },\n    disable: function () {\n      this.enabled = false;\n    },\n    enable: function () {\n      this.enabled = true;\n    },\n    refresh: function () {\n      utils.getRect(this.wrapper); // Force reflow\n\n      this.wrapperWidth = this.wrapper.clientWidth;\n      this.wrapperHeight = this.wrapper.clientHeight;\n      var rect = utils.getRect(this.scroller);\n      /* REPLACE START: refresh */\n\n      this.scrollerWidth = rect.width;\n      this.scrollerHeight = rect.height;\n      this.maxScrollX = this.wrapperWidth - this.scrollerWidth;\n      this.maxScrollY = this.wrapperHeight - this.scrollerHeight;\n      /* REPLACE END: refresh */\n\n      this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\n      this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\n\n      if (!this.hasHorizontalScroll) {\n        this.maxScrollX = 0;\n        this.scrollerWidth = this.wrapperWidth;\n      }\n\n      if (!this.hasVerticalScroll) {\n        this.maxScrollY = 0;\n        this.scrollerHeight = this.wrapperHeight;\n      }\n\n      this.endTime = 0;\n      this.directionX = 0;\n      this.directionY = 0;\n\n      if (utils.hasPointer && !this.options.disablePointer) {\n        // The wrapper should have `touchAction` property for using pointerEvent.\n        this.wrapper.style[utils.style.touchAction] = utils.getTouchAction(this.options.eventPassthrough, true); // case. not support 'pinch-zoom'\n        // https://github.com/cubiq/iscroll/issues/1118#issuecomment-270057583\n\n        if (!this.wrapper.style[utils.style.touchAction]) {\n          this.wrapper.style[utils.style.touchAction] = utils.getTouchAction(this.options.eventPassthrough, false);\n        }\n      }\n\n      this.wrapperOffset = utils.offset(this.wrapper);\n\n      this._execEvent('refresh');\n\n      this.resetPosition(); // INSERT POINT: _refresh\n    },\n    on: function (type, fn) {\n      if (!this._events[type]) {\n        this._events[type] = [];\n      }\n\n      this._events[type].push(fn);\n    },\n    off: function (type, fn) {\n      if (!this._events[type]) {\n        return;\n      }\n\n      var index = this._events[type].indexOf(fn);\n\n      if (index > -1) {\n        this._events[type].splice(index, 1);\n      }\n    },\n    _execEvent: function (type) {\n      if (!this._events[type]) {\n        return;\n      }\n\n      var i = 0,\n          l = this._events[type].length;\n\n      if (!l) {\n        return;\n      }\n\n      for (; i < l; i++) {\n        this._events[type][i].apply(this, [].slice.call(arguments, 1));\n      }\n    },\n    scrollBy: function (x, y, time, easing) {\n      x = this.x + x;\n      y = this.y + y;\n      time = time || 0;\n      this.scrollTo(x, y, time, easing);\n    },\n    scrollTo: function (x, y, time, easing) {\n      easing = easing || utils.ease.circular;\n      this.isInTransition = this.options.useTransition && time > 0;\n      var transitionType = this.options.useTransition && easing.style;\n\n      if (!time || transitionType) {\n        if (transitionType) {\n          this._transitionTimingFunction(easing.style);\n\n          this._transitionTime(time);\n        }\n\n        this._translate(x, y);\n      } else {\n        this._animate(x, y, time, easing.fn);\n      }\n    },\n    scrollToElement: function (el, time, offsetX, offsetY, easing) {\n      el = el.nodeType ? el : this.scroller.querySelector(el);\n\n      if (!el) {\n        return;\n      }\n\n      var pos = utils.offset(el);\n      pos.left -= this.wrapperOffset.left;\n      pos.top -= this.wrapperOffset.top; // if offsetX/Y are true we center the element to the screen\n\n      var elRect = utils.getRect(el);\n      var wrapperRect = utils.getRect(this.wrapper);\n\n      if (offsetX === true) {\n        offsetX = Math.round(elRect.width / 2 - wrapperRect.width / 2);\n      }\n\n      if (offsetY === true) {\n        offsetY = Math.round(elRect.height / 2 - wrapperRect.height / 2);\n      }\n\n      pos.left -= offsetX || 0;\n      pos.top -= offsetY || 0;\n      pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n      pos.top = pos.top > 0 ? 0 : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;\n      time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x - pos.left), Math.abs(this.y - pos.top)) : time;\n      this.scrollTo(pos.left, pos.top, time, easing);\n    },\n    _transitionTime: function (time) {\n      if (!this.options.useTransition) {\n        return;\n      }\n\n      time = time || 0;\n      var durationProp = utils.style.transitionDuration;\n\n      if (!durationProp) {\n        return;\n      }\n\n      this.scrollerStyle[durationProp] = time + 'ms';\n\n      if (!time && utils.isBadAndroid) {\n        this.scrollerStyle[durationProp] = '0.0001ms'; // remove 0.0001ms\n\n        var self = this;\n        rAF(function () {\n          if (self.scrollerStyle[durationProp] === '0.0001ms') {\n            self.scrollerStyle[durationProp] = '0s';\n          }\n        });\n      }\n\n      if (this.indicators) {\n        for (var i = this.indicators.length; i--;) {\n          this.indicators[i].transitionTime(time);\n        }\n      } // INSERT POINT: _transitionTime\n\n    },\n    _transitionTimingFunction: function (easing) {\n      this.scrollerStyle[utils.style.transitionTimingFunction] = easing;\n\n      if (this.indicators) {\n        for (var i = this.indicators.length; i--;) {\n          this.indicators[i].transitionTimingFunction(easing);\n        }\n      } // INSERT POINT: _transitionTimingFunction\n\n    },\n    _translate: function (x, y) {\n      if (this.options.useTransform) {\n        /* REPLACE START: _translate */\n        this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\n        /* REPLACE END: _translate */\n      } else {\n        x = Math.round(x);\n        y = Math.round(y);\n        this.scrollerStyle.left = x + 'px';\n        this.scrollerStyle.top = y + 'px';\n      }\n\n      this.x = x;\n      this.y = y;\n\n      if (this.indicators) {\n        for (var i = this.indicators.length; i--;) {\n          this.indicators[i].updatePosition();\n        }\n      } // INSERT POINT: _translate\n\n    },\n    _initEvents: function (remove) {\n      var eventType = remove ? utils.removeEvent : utils.addEvent,\n          target = this.options.bindToWrapper ? this.wrapper : window;\n      eventType(window, 'orientationchange', this);\n      eventType(window, 'resize', this);\n\n      if (this.options.click) {\n        eventType(this.wrapper, 'click', this, true);\n      }\n\n      if (!this.options.disableMouse) {\n        eventType(this.wrapper, 'mousedown', this);\n        eventType(target, 'mousemove', this);\n        eventType(target, 'mousecancel', this);\n        eventType(target, 'mouseup', this);\n      }\n\n      if (utils.hasPointer && !this.options.disablePointer) {\n        eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\n        eventType(target, utils.prefixPointerEvent('pointermove'), this);\n        eventType(target, utils.prefixPointerEvent('pointercancel'), this);\n        eventType(target, utils.prefixPointerEvent('pointerup'), this);\n      }\n\n      if (utils.hasTouch && !this.options.disableTouch) {\n        eventType(this.wrapper, 'touchstart', this);\n        eventType(target, 'touchmove', this);\n        eventType(target, 'touchcancel', this);\n        eventType(target, 'touchend', this);\n      }\n\n      eventType(this.scroller, 'transitionend', this);\n      eventType(this.scroller, 'webkitTransitionEnd', this);\n      eventType(this.scroller, 'oTransitionEnd', this);\n      eventType(this.scroller, 'MSTransitionEnd', this);\n    },\n    getComputedPosition: function () {\n      var matrix = window.getComputedStyle(this.scroller, null),\n          x,\n          y;\n\n      if (this.options.useTransform) {\n        matrix = matrix[utils.style.transform].split(')')[0].split(', ');\n        x = +(matrix[12] || matrix[4]);\n        y = +(matrix[13] || matrix[5]);\n      } else {\n        x = +matrix.left.replace(/[^-\\d.]/g, '');\n        y = +matrix.top.replace(/[^-\\d.]/g, '');\n      }\n\n      return {\n        x: x,\n        y: y\n      };\n    },\n    _initIndicators: function () {\n      var interactive = this.options.interactiveScrollbars,\n          customStyle = typeof this.options.scrollbars != 'string',\n          indicators = [],\n          indicator;\n      var that = this;\n      this.indicators = [];\n\n      if (this.options.scrollbars) {\n        // Vertical scrollbar\n        if (this.options.scrollY) {\n          indicator = {\n            el: createDefaultScrollbar('v', interactive, this.options.scrollbars),\n            interactive: interactive,\n            defaultScrollbars: true,\n            customStyle: customStyle,\n            resize: this.options.resizeScrollbars,\n            shrink: this.options.shrinkScrollbars,\n            fade: this.options.fadeScrollbars,\n            listenX: false\n          };\n          this.wrapper.appendChild(indicator.el);\n          indicators.push(indicator);\n        } // Horizontal scrollbar\n\n\n        if (this.options.scrollX) {\n          indicator = {\n            el: createDefaultScrollbar('h', interactive, this.options.scrollbars),\n            interactive: interactive,\n            defaultScrollbars: true,\n            customStyle: customStyle,\n            resize: this.options.resizeScrollbars,\n            shrink: this.options.shrinkScrollbars,\n            fade: this.options.fadeScrollbars,\n            listenY: false\n          };\n          this.wrapper.appendChild(indicator.el);\n          indicators.push(indicator);\n        }\n      }\n\n      if (this.options.indicators) {\n        // TODO: check concat compatibility\n        indicators = indicators.concat(this.options.indicators);\n      }\n\n      for (var i = indicators.length; i--;) {\n        this.indicators.push(new Indicator(this, indicators[i]));\n      } // TODO: check if we can use array.map (wide compatibility and performance issues)\n\n\n      function _indicatorsMap(fn) {\n        if (that.indicators) {\n          for (var i = that.indicators.length; i--;) {\n            fn.call(that.indicators[i]);\n          }\n        }\n      }\n\n      if (this.options.fadeScrollbars) {\n        this.on('scrollEnd', function () {\n          _indicatorsMap(function () {\n            this.fade();\n          });\n        });\n        this.on('scrollCancel', function () {\n          _indicatorsMap(function () {\n            this.fade();\n          });\n        });\n        this.on('scrollStart', function () {\n          _indicatorsMap(function () {\n            this.fade(1);\n          });\n        });\n        this.on('beforeScrollStart', function () {\n          _indicatorsMap(function () {\n            this.fade(1, true);\n          });\n        });\n      }\n\n      this.on('refresh', function () {\n        _indicatorsMap(function () {\n          this.refresh();\n        });\n      });\n      this.on('destroy', function () {\n        _indicatorsMap(function () {\n          this.destroy();\n        });\n\n        delete this.indicators;\n      });\n    },\n    _initWheel: function () {\n      utils.addEvent(this.wrapper, 'wheel', this);\n      utils.addEvent(this.wrapper, 'mousewheel', this);\n      utils.addEvent(this.wrapper, 'DOMMouseScroll', this);\n      this.on('destroy', function () {\n        clearTimeout(this.wheelTimeout);\n        this.wheelTimeout = null;\n        utils.removeEvent(this.wrapper, 'wheel', this);\n        utils.removeEvent(this.wrapper, 'mousewheel', this);\n        utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);\n      });\n    },\n    _wheel: function (e) {\n      if (!this.enabled) {\n        return;\n      }\n\n      e.preventDefault();\n      var wheelDeltaX,\n          wheelDeltaY,\n          newX,\n          newY,\n          that = this;\n\n      if (this.wheelTimeout === undefined) {\n        that._execEvent('scrollStart');\n      } // Execute the scrollEnd event after 400ms the wheel stopped scrolling\n\n\n      clearTimeout(this.wheelTimeout);\n      this.wheelTimeout = setTimeout(function () {\n        if (!that.options.snap) {\n          that._execEvent('scrollEnd');\n        }\n\n        that.wheelTimeout = undefined;\n      }, 400);\n\n      if ('deltaX' in e) {\n        if (e.deltaMode === 1) {\n          wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;\n          wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;\n        } else {\n          wheelDeltaX = -e.deltaX;\n          wheelDeltaY = -e.deltaY;\n        }\n      } else if ('wheelDeltaX' in e) {\n        wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;\n        wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;\n      } else if ('wheelDelta' in e) {\n        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;\n      } else if ('detail' in e) {\n        wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;\n      } else {\n        return;\n      }\n\n      wheelDeltaX *= this.options.invertWheelDirection;\n      wheelDeltaY *= this.options.invertWheelDirection;\n\n      if (!this.hasVerticalScroll) {\n        wheelDeltaX = wheelDeltaY;\n        wheelDeltaY = 0;\n      }\n\n      if (this.options.snap) {\n        newX = this.currentPage.pageX;\n        newY = this.currentPage.pageY;\n\n        if (wheelDeltaX > 0) {\n          newX--;\n        } else if (wheelDeltaX < 0) {\n          newX++;\n        }\n\n        if (wheelDeltaY > 0) {\n          newY--;\n        } else if (wheelDeltaY < 0) {\n          newY++;\n        }\n\n        this.goToPage(newX, newY);\n        return;\n      }\n\n      newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n      newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n      this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\n      this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\n\n      if (newX > 0) {\n        newX = 0;\n      } else if (newX < this.maxScrollX) {\n        newX = this.maxScrollX;\n      }\n\n      if (newY > 0) {\n        newY = 0;\n      } else if (newY < this.maxScrollY) {\n        newY = this.maxScrollY;\n      }\n\n      this.scrollTo(newX, newY, 0); // INSERT POINT: _wheel\n    },\n    _initSnap: function () {\n      this.currentPage = {};\n\n      if (typeof this.options.snap == 'string') {\n        this.options.snap = this.scroller.querySelectorAll(this.options.snap);\n      }\n\n      this.on('refresh', function () {\n        var i = 0,\n            l,\n            m = 0,\n            n,\n            cx,\n            cy,\n            x = 0,\n            y,\n            stepX = this.options.snapStepX || this.wrapperWidth,\n            stepY = this.options.snapStepY || this.wrapperHeight,\n            el,\n            rect;\n        this.pages = [];\n\n        if (!this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight) {\n          return;\n        }\n\n        if (this.options.snap === true) {\n          cx = Math.round(stepX / 2);\n          cy = Math.round(stepY / 2);\n\n          while (x > -this.scrollerWidth) {\n            this.pages[i] = [];\n            l = 0;\n            y = 0;\n\n            while (y > -this.scrollerHeight) {\n              this.pages[i][l] = {\n                x: Math.max(x, this.maxScrollX),\n                y: Math.max(y, this.maxScrollY),\n                width: stepX,\n                height: stepY,\n                cx: x - cx,\n                cy: y - cy\n              };\n              y -= stepY;\n              l++;\n            }\n\n            x -= stepX;\n            i++;\n          }\n        } else {\n          el = this.options.snap;\n          l = el.length;\n          n = -1;\n\n          for (; i < l; i++) {\n            rect = utils.getRect(el[i]);\n\n            if (i === 0 || rect.left <= utils.getRect(el[i - 1]).left) {\n              m = 0;\n              n++;\n            }\n\n            if (!this.pages[m]) {\n              this.pages[m] = [];\n            }\n\n            x = Math.max(-rect.left, this.maxScrollX);\n            y = Math.max(-rect.top, this.maxScrollY);\n            cx = x - Math.round(rect.width / 2);\n            cy = y - Math.round(rect.height / 2);\n            this.pages[m][n] = {\n              x: x,\n              y: y,\n              width: rect.width,\n              height: rect.height,\n              cx: cx,\n              cy: cy\n            };\n\n            if (x > this.maxScrollX) {\n              m++;\n            }\n          }\n        }\n\n        this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0); // Update snap threshold if needed\n\n        if (this.options.snapThreshold % 1 === 0) {\n          this.snapThresholdX = this.options.snapThreshold;\n          this.snapThresholdY = this.options.snapThreshold;\n        } else {\n          this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);\n          this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);\n        }\n      });\n      this.on('flick', function () {\n        var time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(this.x - this.startX), 1000), Math.min(Math.abs(this.y - this.startY), 1000)), 300);\n        this.goToPage(this.currentPage.pageX + this.directionX, this.currentPage.pageY + this.directionY, time);\n      });\n    },\n    _nearestSnap: function (x, y) {\n      if (!this.pages.length) {\n        return {\n          x: 0,\n          y: 0,\n          pageX: 0,\n          pageY: 0\n        };\n      }\n\n      var i = 0,\n          l = this.pages.length,\n          m = 0; // Check if we exceeded the snap threshold\n\n      if (Math.abs(x - this.absStartX) < this.snapThresholdX && Math.abs(y - this.absStartY) < this.snapThresholdY) {\n        return this.currentPage;\n      }\n\n      if (x > 0) {\n        x = 0;\n      } else if (x < this.maxScrollX) {\n        x = this.maxScrollX;\n      }\n\n      if (y > 0) {\n        y = 0;\n      } else if (y < this.maxScrollY) {\n        y = this.maxScrollY;\n      }\n\n      for (; i < l; i++) {\n        if (x >= this.pages[i][0].cx) {\n          x = this.pages[i][0].x;\n          break;\n        }\n      }\n\n      l = this.pages[i].length;\n\n      for (; m < l; m++) {\n        if (y >= this.pages[0][m].cy) {\n          y = this.pages[0][m].y;\n          break;\n        }\n      }\n\n      if (i == this.currentPage.pageX) {\n        i += this.directionX;\n\n        if (i < 0) {\n          i = 0;\n        } else if (i >= this.pages.length) {\n          i = this.pages.length - 1;\n        }\n\n        x = this.pages[i][0].x;\n      }\n\n      if (m == this.currentPage.pageY) {\n        m += this.directionY;\n\n        if (m < 0) {\n          m = 0;\n        } else if (m >= this.pages[0].length) {\n          m = this.pages[0].length - 1;\n        }\n\n        y = this.pages[0][m].y;\n      }\n\n      return {\n        x: x,\n        y: y,\n        pageX: i,\n        pageY: m\n      };\n    },\n    goToPage: function (x, y, time, easing) {\n      easing = easing || this.options.bounceEasing;\n\n      if (x >= this.pages.length) {\n        x = this.pages.length - 1;\n      } else if (x < 0) {\n        x = 0;\n      }\n\n      if (y >= this.pages[x].length) {\n        y = this.pages[x].length - 1;\n      } else if (y < 0) {\n        y = 0;\n      }\n\n      var posX = this.pages[x][y].x,\n          posY = this.pages[x][y].y;\n      time = time === undefined ? this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(posX - this.x), 1000), Math.min(Math.abs(posY - this.y), 1000)), 300) : time;\n      this.currentPage = {\n        x: posX,\n        y: posY,\n        pageX: x,\n        pageY: y\n      };\n      this.scrollTo(posX, posY, time, easing);\n    },\n    next: function (time, easing) {\n      var x = this.currentPage.pageX,\n          y = this.currentPage.pageY;\n      x++;\n\n      if (x >= this.pages.length && this.hasVerticalScroll) {\n        x = 0;\n        y++;\n      }\n\n      this.goToPage(x, y, time, easing);\n    },\n    prev: function (time, easing) {\n      var x = this.currentPage.pageX,\n          y = this.currentPage.pageY;\n      x--;\n\n      if (x < 0 && this.hasVerticalScroll) {\n        x = 0;\n        y--;\n      }\n\n      this.goToPage(x, y, time, easing);\n    },\n    _initKeys: function (e) {\n      // default key bindings\n      var keys = {\n        pageUp: 33,\n        pageDown: 34,\n        end: 35,\n        home: 36,\n        left: 37,\n        up: 38,\n        right: 39,\n        down: 40\n      };\n      var i; // if you give me characters I give you keycode\n\n      if (typeof this.options.keyBindings == 'object') {\n        for (i in this.options.keyBindings) {\n          if (typeof this.options.keyBindings[i] == 'string') {\n            this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);\n          }\n        }\n      } else {\n        this.options.keyBindings = {};\n      }\n\n      for (i in keys) {\n        this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];\n      }\n\n      utils.addEvent(window, 'keydown', this);\n      this.on('destroy', function () {\n        utils.removeEvent(window, 'keydown', this);\n      });\n    },\n    _key: function (e) {\n      if (!this.enabled) {\n        return;\n      }\n\n      var snap = this.options.snap,\n          // we are using this alot, better to cache it\n      newX = snap ? this.currentPage.pageX : this.x,\n          newY = snap ? this.currentPage.pageY : this.y,\n          now = utils.getTime(),\n          prevTime = this.keyTime || 0,\n          acceleration = 0.250,\n          pos;\n\n      if (this.options.useTransition && this.isInTransition) {\n        pos = this.getComputedPosition();\n\n        this._translate(Math.round(pos.x), Math.round(pos.y));\n\n        this.isInTransition = false;\n      }\n\n      this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;\n\n      switch (e.keyCode) {\n        case this.options.keyBindings.pageUp:\n          if (this.hasHorizontalScroll && !this.hasVerticalScroll) {\n            newX += snap ? 1 : this.wrapperWidth;\n          } else {\n            newY += snap ? 1 : this.wrapperHeight;\n          }\n\n          break;\n\n        case this.options.keyBindings.pageDown:\n          if (this.hasHorizontalScroll && !this.hasVerticalScroll) {\n            newX -= snap ? 1 : this.wrapperWidth;\n          } else {\n            newY -= snap ? 1 : this.wrapperHeight;\n          }\n\n          break;\n\n        case this.options.keyBindings.end:\n          newX = snap ? this.pages.length - 1 : this.maxScrollX;\n          newY = snap ? this.pages[0].length - 1 : this.maxScrollY;\n          break;\n\n        case this.options.keyBindings.home:\n          newX = 0;\n          newY = 0;\n          break;\n\n        case this.options.keyBindings.left:\n          newX += snap ? -1 : 5 + this.keyAcceleration >> 0;\n          break;\n\n        case this.options.keyBindings.up:\n          newY += snap ? 1 : 5 + this.keyAcceleration >> 0;\n          break;\n\n        case this.options.keyBindings.right:\n          newX -= snap ? -1 : 5 + this.keyAcceleration >> 0;\n          break;\n\n        case this.options.keyBindings.down:\n          newY -= snap ? 1 : 5 + this.keyAcceleration >> 0;\n          break;\n\n        default:\n          return;\n      }\n\n      if (snap) {\n        this.goToPage(newX, newY);\n        return;\n      }\n\n      if (newX > 0) {\n        newX = 0;\n        this.keyAcceleration = 0;\n      } else if (newX < this.maxScrollX) {\n        newX = this.maxScrollX;\n        this.keyAcceleration = 0;\n      }\n\n      if (newY > 0) {\n        newY = 0;\n        this.keyAcceleration = 0;\n      } else if (newY < this.maxScrollY) {\n        newY = this.maxScrollY;\n        this.keyAcceleration = 0;\n      }\n\n      this.scrollTo(newX, newY, 0);\n      this.keyTime = now;\n    },\n    _animate: function (destX, destY, duration, easingFn) {\n      var that = this,\n          startX = this.x,\n          startY = this.y,\n          startTime = utils.getTime(),\n          destTime = startTime + duration;\n\n      function step() {\n        var now = utils.getTime(),\n            newX,\n            newY,\n            easing;\n\n        if (now >= destTime) {\n          that.isAnimating = false;\n\n          that._translate(destX, destY);\n\n          if (!that.resetPosition(that.options.bounceTime)) {\n            that._execEvent('scrollEnd');\n          }\n\n          return;\n        }\n\n        now = (now - startTime) / duration;\n        easing = easingFn(now);\n        newX = (destX - startX) * easing + startX;\n        newY = (destY - startY) * easing + startY;\n\n        that._translate(newX, newY);\n\n        if (that.isAnimating) {\n          rAF(step);\n        }\n      }\n\n      this.isAnimating = true;\n      step();\n    },\n    handleEvent: function (e) {\n      switch (e.type) {\n        case 'touchstart':\n        case 'pointerdown':\n        case 'MSPointerDown':\n        case 'mousedown':\n          this._start(e);\n\n          break;\n\n        case 'touchmove':\n        case 'pointermove':\n        case 'MSPointerMove':\n        case 'mousemove':\n          this._move(e);\n\n          break;\n\n        case 'touchend':\n        case 'pointerup':\n        case 'MSPointerUp':\n        case 'mouseup':\n        case 'touchcancel':\n        case 'pointercancel':\n        case 'MSPointerCancel':\n        case 'mousecancel':\n          this._end(e);\n\n          break;\n\n        case 'orientationchange':\n        case 'resize':\n          this._resize();\n\n          break;\n\n        case 'transitionend':\n        case 'webkitTransitionEnd':\n        case 'oTransitionEnd':\n        case 'MSTransitionEnd':\n          this._transitionEnd(e);\n\n          break;\n\n        case 'wheel':\n        case 'DOMMouseScroll':\n        case 'mousewheel':\n          this._wheel(e);\n\n          break;\n\n        case 'keydown':\n          this._key(e);\n\n          break;\n\n        case 'click':\n          if (this.enabled && !e._constructed) {\n            e.preventDefault();\n            e.stopPropagation();\n          }\n\n          break;\n      }\n    }\n  };\n\n  function createDefaultScrollbar(direction, interactive, type) {\n    var scrollbar = document.createElement('div'),\n        indicator = document.createElement('div');\n\n    if (type === true) {\n      scrollbar.style.cssText = 'position:absolute;z-index:9999';\n      indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';\n    }\n\n    indicator.className = 'iScrollIndicator';\n\n    if (direction == 'h') {\n      if (type === true) {\n        scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n        indicator.style.height = '100%';\n      }\n\n      scrollbar.className = 'iScrollHorizontalScrollbar';\n    } else {\n      if (type === true) {\n        scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n        indicator.style.width = '100%';\n      }\n\n      scrollbar.className = 'iScrollVerticalScrollbar';\n    }\n\n    scrollbar.style.cssText += ';overflow:hidden';\n\n    if (!interactive) {\n      scrollbar.style.pointerEvents = 'none';\n    }\n\n    scrollbar.appendChild(indicator);\n    return scrollbar;\n  }\n\n  function Indicator(scroller, options) {\n    this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n    this.wrapperStyle = this.wrapper.style;\n    this.indicator = this.wrapper.children[0];\n    this.indicatorStyle = this.indicator.style;\n    this.scroller = scroller;\n    this.options = {\n      listenX: true,\n      listenY: true,\n      interactive: false,\n      resize: true,\n      defaultScrollbars: false,\n      shrink: false,\n      fade: false,\n      speedRatioX: 0,\n      speedRatioY: 0\n    };\n\n    for (var i in options) {\n      this.options[i] = options[i];\n    }\n\n    this.sizeRatioX = 1;\n    this.sizeRatioY = 1;\n    this.maxPosX = 0;\n    this.maxPosY = 0;\n\n    if (this.options.interactive) {\n      if (!this.options.disableTouch) {\n        utils.addEvent(this.indicator, 'touchstart', this);\n        utils.addEvent(window, 'touchend', this);\n      }\n\n      if (!this.options.disablePointer) {\n        utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n        utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);\n      }\n\n      if (!this.options.disableMouse) {\n        utils.addEvent(this.indicator, 'mousedown', this);\n        utils.addEvent(window, 'mouseup', this);\n      }\n    }\n\n    if (this.options.fade) {\n      this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;\n      var durationProp = utils.style.transitionDuration;\n\n      if (!durationProp) {\n        return;\n      }\n\n      this.wrapperStyle[durationProp] = utils.isBadAndroid ? '0.0001ms' : '0ms'; // remove 0.0001ms\n\n      var self = this;\n\n      if (utils.isBadAndroid) {\n        rAF(function () {\n          if (self.wrapperStyle[durationProp] === '0.0001ms') {\n            self.wrapperStyle[durationProp] = '0s';\n          }\n        });\n      }\n\n      this.wrapperStyle.opacity = '0';\n    }\n  }\n\n  Indicator.prototype = {\n    handleEvent: function (e) {\n      switch (e.type) {\n        case 'touchstart':\n        case 'pointerdown':\n        case 'MSPointerDown':\n        case 'mousedown':\n          this._start(e);\n\n          break;\n\n        case 'touchmove':\n        case 'pointermove':\n        case 'MSPointerMove':\n        case 'mousemove':\n          this._move(e);\n\n          break;\n\n        case 'touchend':\n        case 'pointerup':\n        case 'MSPointerUp':\n        case 'mouseup':\n        case 'touchcancel':\n        case 'pointercancel':\n        case 'MSPointerCancel':\n        case 'mousecancel':\n          this._end(e);\n\n          break;\n      }\n    },\n    destroy: function () {\n      if (this.options.fadeScrollbars) {\n        clearTimeout(this.fadeTimeout);\n        this.fadeTimeout = null;\n      }\n\n      if (this.options.interactive) {\n        utils.removeEvent(this.indicator, 'touchstart', this);\n        utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\n        utils.removeEvent(this.indicator, 'mousedown', this);\n        utils.removeEvent(window, 'touchmove', this);\n        utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n        utils.removeEvent(window, 'mousemove', this);\n        utils.removeEvent(window, 'touchend', this);\n        utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);\n        utils.removeEvent(window, 'mouseup', this);\n      }\n\n      if (this.options.defaultScrollbars && this.wrapper.parentNode) {\n        this.wrapper.parentNode.removeChild(this.wrapper);\n      }\n    },\n    _start: function (e) {\n      var point = e.touches ? e.touches[0] : e;\n      e.preventDefault();\n      e.stopPropagation();\n      this.transitionTime();\n      this.initiated = true;\n      this.moved = false;\n      this.lastPointX = point.pageX;\n      this.lastPointY = point.pageY;\n      this.startTime = utils.getTime();\n\n      if (!this.options.disableTouch) {\n        utils.addEvent(window, 'touchmove', this);\n      }\n\n      if (!this.options.disablePointer) {\n        utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);\n      }\n\n      if (!this.options.disableMouse) {\n        utils.addEvent(window, 'mousemove', this);\n      }\n\n      this.scroller._execEvent('beforeScrollStart');\n    },\n    _move: function (e) {\n      var point = e.touches ? e.touches[0] : e,\n          deltaX,\n          deltaY,\n          newX,\n          newY,\n          timestamp = utils.getTime();\n\n      if (!this.moved) {\n        this.scroller._execEvent('scrollStart');\n      }\n\n      this.moved = true;\n      deltaX = point.pageX - this.lastPointX;\n      this.lastPointX = point.pageX;\n      deltaY = point.pageY - this.lastPointY;\n      this.lastPointY = point.pageY;\n      newX = this.x + deltaX;\n      newY = this.y + deltaY;\n\n      this._pos(newX, newY); // INSERT POINT: indicator._move\n\n\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    _end: function (e) {\n      if (!this.initiated) {\n        return;\n      }\n\n      this.initiated = false;\n      e.preventDefault();\n      e.stopPropagation();\n      utils.removeEvent(window, 'touchmove', this);\n      utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\n      utils.removeEvent(window, 'mousemove', this);\n\n      if (this.scroller.options.snap) {\n        var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n        var time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - snap.x), 1000), Math.min(Math.abs(this.scroller.y - snap.y), 1000)), 300);\n\n        if (this.scroller.x != snap.x || this.scroller.y != snap.y) {\n          this.scroller.directionX = 0;\n          this.scroller.directionY = 0;\n          this.scroller.currentPage = snap;\n          this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);\n        }\n      }\n\n      if (this.moved) {\n        this.scroller._execEvent('scrollEnd');\n      }\n    },\n    transitionTime: function (time) {\n      time = time || 0;\n      var durationProp = utils.style.transitionDuration;\n\n      if (!durationProp) {\n        return;\n      }\n\n      this.indicatorStyle[durationProp] = time + 'ms';\n\n      if (!time && utils.isBadAndroid) {\n        this.indicatorStyle[durationProp] = '0.0001ms'; // remove 0.0001ms\n\n        var self = this;\n        rAF(function () {\n          if (self.indicatorStyle[durationProp] === '0.0001ms') {\n            self.indicatorStyle[durationProp] = '0s';\n          }\n        });\n      }\n    },\n    transitionTimingFunction: function (easing) {\n      this.indicatorStyle[utils.style.transitionTimingFunction] = easing;\n    },\n    refresh: function () {\n      this.transitionTime();\n\n      if (this.options.listenX && !this.options.listenY) {\n        this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n      } else if (this.options.listenY && !this.options.listenX) {\n        this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n      } else {\n        this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n      }\n\n      if (this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll) {\n        utils.addClass(this.wrapper, 'iScrollBothScrollbars');\n        utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');\n\n        if (this.options.defaultScrollbars && this.options.customStyle) {\n          if (this.options.listenX) {\n            this.wrapper.style.right = '8px';\n          } else {\n            this.wrapper.style.bottom = '8px';\n          }\n        }\n      } else {\n        utils.removeClass(this.wrapper, 'iScrollBothScrollbars');\n        utils.addClass(this.wrapper, 'iScrollLoneScrollbar');\n\n        if (this.options.defaultScrollbars && this.options.customStyle) {\n          if (this.options.listenX) {\n            this.wrapper.style.right = '2px';\n          } else {\n            this.wrapper.style.bottom = '2px';\n          }\n        }\n      }\n\n      utils.getRect(this.wrapper); // force refresh\n\n      if (this.options.listenX) {\n        this.wrapperWidth = this.wrapper.clientWidth;\n\n        if (this.options.resize) {\n          this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n          this.indicatorStyle.width = this.indicatorWidth + 'px';\n        } else {\n          this.indicatorWidth = this.indicator.clientWidth;\n        }\n\n        this.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n        if (this.options.shrink == 'clip') {\n          this.minBoundaryX = -this.indicatorWidth + 8;\n          this.maxBoundaryX = this.wrapperWidth - 8;\n        } else {\n          this.minBoundaryX = 0;\n          this.maxBoundaryX = this.maxPosX;\n        }\n\n        this.sizeRatioX = this.options.speedRatioX || this.scroller.maxScrollX && this.maxPosX / this.scroller.maxScrollX;\n      }\n\n      if (this.options.listenY) {\n        this.wrapperHeight = this.wrapper.clientHeight;\n\n        if (this.options.resize) {\n          this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n          this.indicatorStyle.height = this.indicatorHeight + 'px';\n        } else {\n          this.indicatorHeight = this.indicator.clientHeight;\n        }\n\n        this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n        if (this.options.shrink == 'clip') {\n          this.minBoundaryY = -this.indicatorHeight + 8;\n          this.maxBoundaryY = this.wrapperHeight - 8;\n        } else {\n          this.minBoundaryY = 0;\n          this.maxBoundaryY = this.maxPosY;\n        }\n\n        this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n        this.sizeRatioY = this.options.speedRatioY || this.scroller.maxScrollY && this.maxPosY / this.scroller.maxScrollY;\n      }\n\n      this.updatePosition();\n    },\n    updatePosition: function () {\n      var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n          y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n      if (!this.options.ignoreBoundaries) {\n        if (x < this.minBoundaryX) {\n          if (this.options.shrink == 'scale') {\n            this.width = Math.max(this.indicatorWidth + x, 8);\n            this.indicatorStyle.width = this.width + 'px';\n          }\n\n          x = this.minBoundaryX;\n        } else if (x > this.maxBoundaryX) {\n          if (this.options.shrink == 'scale') {\n            this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n            this.indicatorStyle.width = this.width + 'px';\n            x = this.maxPosX + this.indicatorWidth - this.width;\n          } else {\n            x = this.maxBoundaryX;\n          }\n        } else if (this.options.shrink == 'scale' && this.width != this.indicatorWidth) {\n          this.width = this.indicatorWidth;\n          this.indicatorStyle.width = this.width + 'px';\n        }\n\n        if (y < this.minBoundaryY) {\n          if (this.options.shrink == 'scale') {\n            this.height = Math.max(this.indicatorHeight + y * 3, 8);\n            this.indicatorStyle.height = this.height + 'px';\n          }\n\n          y = this.minBoundaryY;\n        } else if (y > this.maxBoundaryY) {\n          if (this.options.shrink == 'scale') {\n            this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n            this.indicatorStyle.height = this.height + 'px';\n            y = this.maxPosY + this.indicatorHeight - this.height;\n          } else {\n            y = this.maxBoundaryY;\n          }\n        } else if (this.options.shrink == 'scale' && this.height != this.indicatorHeight) {\n          this.height = this.indicatorHeight;\n          this.indicatorStyle.height = this.height + 'px';\n        }\n      }\n\n      this.x = x;\n      this.y = y;\n\n      if (this.scroller.options.useTransform) {\n        this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;\n      } else {\n        this.indicatorStyle.left = x + 'px';\n        this.indicatorStyle.top = y + 'px';\n      }\n    },\n    _pos: function (x, y) {\n      if (x < 0) {\n        x = 0;\n      } else if (x > this.maxPosX) {\n        x = this.maxPosX;\n      }\n\n      if (y < 0) {\n        y = 0;\n      } else if (y > this.maxPosY) {\n        y = this.maxPosY;\n      }\n\n      x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;\n      y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;\n      this.scroller.scrollTo(x, y);\n    },\n    fade: function (val, hold) {\n      if (hold && !this.visible) {\n        return;\n      }\n\n      clearTimeout(this.fadeTimeout);\n      this.fadeTimeout = null;\n      var time = val ? 250 : 500,\n          delay = val ? 0 : 300;\n      val = val ? '1' : '0';\n      this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';\n      this.fadeTimeout = setTimeout(function (val) {\n        this.wrapperStyle.opacity = val;\n        this.visible = +val;\n      }.bind(this, val), delay);\n    }\n  };\n  IScroll.utils = utils;\n\n  if (typeof module != 'undefined' && module.exports) {\n    module.exports = IScroll;\n  } else {\n    window.IScroll = IScroll;\n  }\n})(window, document, Math);","map":{"version":3,"sources":["D:/Documents/Github/yiliunat.github.io/src/lib/iscroll.js"],"names":["window","document","Math","rAF","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","utils","me","_elementStyle","createElement","style","_vendor","vendors","transform","i","l","length","substr","_prefixStyle","charAt","toUpperCase","getTime","Date","now","extend","target","obj","addEvent","el","type","fn","capture","addEventListener","removeEvent","removeEventListener","prefixPointerEvent","pointerEvent","MSPointerEvent","momentum","current","start","time","lowerMargin","wrapperSize","deceleration","distance","speed","abs","destination","duration","undefined","round","_transform","hasTransform","hasPerspective","hasTouch","hasPointer","PointerEvent","hasTransition","isBadAndroid","appVersion","navigator","test","safariVersion","match","parseFloat","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","touchAction","hasClass","e","c","re","RegExp","className","addClass","newclass","split","push","join","removeClass","replace","offset","left","offsetLeft","top","offsetTop","offsetParent","preventDefaultException","exceptions","eventType","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","pointerdown","pointermove","pointerup","MSPointerDown","MSPointerMove","MSPointerUp","ease","quadratic","k","circular","sqrt","back","b","bounce","elastic","f","pow","sin","PI","tap","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","tagName","MouseEvent","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","_constructed","getTouchAction","eventPassthrough","addPinch","getRect","SVGElement","rect","getBoundingClientRect","width","height","offsetWidth","offsetHeight","IScroll","options","wrapper","querySelector","scroller","children","scrollerStyle","resizeScrollbars","mouseWheelSpeed","snapThreshold","disablePointer","disableTouch","disableMouse","startX","startY","scrollY","directionLockThreshold","bounceTime","bounceEasing","preventDefault","HWCompositing","useTransition","useTransform","bindToWrapper","onmousedown","translateZ","scrollX","freeScroll","resizePolling","position","shrinkScrollbars","invertWheelDirection","x","y","directionX","directionY","_events","_init","refresh","scrollTo","enable","prototype","version","_initEvents","scrollbars","indicators","_initIndicators","mouseWheel","_initWheel","snap","_initSnap","keyBindings","_initKeys","destroy","clearTimeout","resizeTimeout","_execEvent","_transitionEnd","isInTransition","_transitionTime","resetPosition","_start","which","enabled","initiated","point","touches","pos","moved","distX","distY","directionLocked","startTime","getComputedPosition","_translate","isAnimating","absStartX","absStartY","pointX","pointY","_move","deltaX","deltaY","timestamp","newX","newY","absDistX","absDistY","endTime","hasHorizontalScroll","hasVerticalScroll","maxScrollX","maxScrollY","_end","changedTouches","momentumX","momentumY","distanceX","distanceY","easing","flick","wrapperWidth","wrapperHeight","max","_nearestSnap","currentPage","snapSpeed","min","_resize","that","disable","clientWidth","clientHeight","scrollerWidth","scrollerHeight","wrapperOffset","on","off","index","indexOf","splice","apply","slice","call","arguments","scrollBy","transitionType","_transitionTimingFunction","_animate","scrollToElement","offsetX","offsetY","nodeType","elRect","wrapperRect","durationProp","self","transitionTime","updatePosition","remove","matrix","getComputedStyle","interactive","interactiveScrollbars","customStyle","indicator","createDefaultScrollbar","defaultScrollbars","resize","shrink","fade","fadeScrollbars","listenX","appendChild","listenY","concat","Indicator","_indicatorsMap","wheelTimeout","_wheel","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","goToPage","querySelectorAll","m","n","cx","cy","stepX","snapStepX","stepY","snapStepY","pages","snapThresholdX","snapThresholdY","posX","posY","next","prev","keys","pageUp","pageDown","end","home","up","right","down","charCodeAt","_key","prevTime","keyTime","acceleration","keyAcceleration","keyCode","destX","destY","easingFn","destTime","step","handleEvent","stopPropagation","direction","scrollbar","cssText","pointerEvents","wrapperStyle","indicatorStyle","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","opacity","fadeTimeout","parentNode","removeChild","lastPointX","lastPointY","_pos","display","bottom","indicatorWidth","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","ignoreBoundaries","val","hold","visible","delay","bind","module","exports"],"mappings":"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","sourcesContent":["/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */\r\n(function (window, document, Math) {\r\nvar rAF = window.requestAnimationFrame\t||\r\n\twindow.webkitRequestAnimationFrame\t||\r\n\twindow.mozRequestAnimationFrame\t\t||\r\n\twindow.oRequestAnimationFrame\t\t||\r\n\twindow.msRequestAnimationFrame\t\t||\r\n\tfunction (callback) { window.setTimeout(callback, 1000 / 60); };\r\n\r\nvar utils = (function () {\r\n\tvar me = {};\r\n\r\n\tvar _elementStyle = document.createElement('div').style;\r\n\tvar _vendor = (function () {\r\n\t\tvar vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\r\n\t\t\ttransform,\r\n\t\t\ti = 0,\r\n\t\t\tl = vendors.length;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\ttransform = vendors[i] + 'ransform';\r\n\t\t\tif ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\tfunction _prefixStyle (style) {\r\n\t\tif ( _vendor === false ) return false;\r\n\t\tif ( _vendor === '' ) return style;\r\n\t\treturn _vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n\t}\r\n\r\n\tme.getTime = Date.now || function getTime () { return new Date().getTime(); };\r\n\r\n\tme.extend = function (target, obj) {\r\n\t\tfor ( var i in obj ) {\r\n\t\t\ttarget[i] = obj[i];\r\n\t\t}\r\n\t};\r\n\r\n\tme.addEvent = function (el, type, fn, capture) {\r\n\t\tel.addEventListener(type, fn, !!capture);\r\n\t};\r\n\r\n\tme.removeEvent = function (el, type, fn, capture) {\r\n\t\tel.removeEventListener(type, fn, !!capture);\r\n\t};\r\n\r\n\tme.prefixPointerEvent = function (pointerEvent) {\r\n\t\treturn window.MSPointerEvent ?\r\n\t\t\t'MSPointer' + pointerEvent.charAt(7).toUpperCase() + pointerEvent.substr(8):\r\n\t\t\tpointerEvent;\r\n\t};\r\n\r\n\tme.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {\r\n\t\tvar distance = current - start,\r\n\t\t\tspeed = Math.abs(distance) / time,\r\n\t\t\tdestination,\r\n\t\t\tduration;\r\n\r\n\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\r\n\r\n\t\tdestination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );\r\n\t\tduration = speed / deceleration;\r\n\r\n\t\tif ( destination < lowerMargin ) {\r\n\t\t\tdestination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;\r\n\t\t\tdistance = Math.abs(destination - current);\r\n\t\t\tduration = distance / speed;\r\n\t\t} else if ( destination > 0 ) {\r\n\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;\r\n\t\t\tdistance = Math.abs(current) + destination;\r\n\t\t\tduration = distance / speed;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tdestination: Math.round(destination),\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tvar _transform = _prefixStyle('transform');\r\n\r\n\tme.extend(me, {\r\n\t\thasTransform: _transform !== false,\r\n\t\thasPerspective: _prefixStyle('perspective') in _elementStyle,\r\n\t\thasTouch: 'ontouchstart' in window,\r\n\t\thasPointer: !!(window.PointerEvent || window.MSPointerEvent), // IE10 is prefixed\r\n\t\thasTransition: _prefixStyle('transition') in _elementStyle\r\n\t});\r\n\r\n\t/*\r\n\tThis should find all Android browsers lower than build 535.19 (both stock browser and webview)\r\n\t- galaxy S2 is ok\r\n    - 2.3.6 : `AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`\r\n    - 4.0.4 : `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\r\n   - galaxy S3 is badAndroid (stock brower, webview)\r\n     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\r\n   - galaxy S4 is badAndroid (stock brower, webview)\r\n     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`\r\n   - galaxy S5 is OK\r\n     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`\r\n   - galaxy S6 is OK\r\n     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`\r\n  */\r\n\tme.isBadAndroid = (function() {\r\n\t\tvar appVersion = window.navigator.appVersion;\r\n\t\t// Android browser is not a chrome browser.\r\n\t\tif (/Android/.test(appVersion) && !(/Chrome\\/\\d/.test(appVersion))) {\r\n\t\t\tvar safariVersion = appVersion.match(/Safari\\/(\\d+.\\d)/);\r\n\t\t\tif(safariVersion && typeof safariVersion === \"object\" && safariVersion.length >= 2) {\r\n\t\t\t\treturn parseFloat(safariVersion[1]) < 535.19;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})();\r\n\r\n\tme.extend(me.style = {}, {\r\n\t\ttransform: _transform,\r\n\t\ttransitionTimingFunction: _prefixStyle('transitionTimingFunction'),\r\n\t\ttransitionDuration: _prefixStyle('transitionDuration'),\r\n\t\ttransitionDelay: _prefixStyle('transitionDelay'),\r\n\t\ttransformOrigin: _prefixStyle('transformOrigin'),\r\n\t\ttouchAction: _prefixStyle('touchAction')\r\n\t});\r\n\r\n\tme.hasClass = function (e, c) {\r\n\t\tvar re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\r\n\t\treturn re.test(e.className);\r\n\t};\r\n\r\n\tme.addClass = function (e, c) {\r\n\t\tif ( me.hasClass(e, c) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar newclass = e.className.split(' ');\r\n\t\tnewclass.push(c);\r\n\t\te.className = newclass.join(' ');\r\n\t};\r\n\r\n\tme.removeClass = function (e, c) {\r\n\t\tif ( !me.hasClass(e, c) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\r\n\t\te.className = e.className.replace(re, ' ');\r\n\t};\r\n\r\n\tme.offset = function (el) {\r\n\t\tvar left = -el.offsetLeft,\r\n\t\t\ttop = -el.offsetTop;\r\n\r\n\t\t// jshint -W084\r\n\t\twhile (el = el.offsetParent) {\r\n\t\t\tleft -= el.offsetLeft;\r\n\t\t\ttop -= el.offsetTop;\r\n\t\t}\r\n\t\t// jshint +W084\r\n\r\n\t\treturn {\r\n\t\t\tleft: left,\r\n\t\t\ttop: top\r\n\t\t};\r\n\t};\r\n\r\n\tme.preventDefaultException = function (el, exceptions) {\r\n\t\tfor ( var i in exceptions ) {\r\n\t\t\tif ( exceptions[i].test(el[i]) ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tme.extend(me.eventType = {}, {\r\n\t\ttouchstart: 1,\r\n\t\ttouchmove: 1,\r\n\t\ttouchend: 1,\r\n\r\n\t\tmousedown: 2,\r\n\t\tmousemove: 2,\r\n\t\tmouseup: 2,\r\n\r\n\t\tpointerdown: 3,\r\n\t\tpointermove: 3,\r\n\t\tpointerup: 3,\r\n\r\n\t\tMSPointerDown: 3,\r\n\t\tMSPointerMove: 3,\r\n\t\tMSPointerUp: 3\r\n\t});\r\n\r\n\tme.extend(me.ease = {}, {\r\n\t\tquadratic: {\r\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\treturn k * ( 2 - k );\r\n\t\t\t}\r\n\t\t},\r\n\t\tcircular: {\r\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\t// Not properly \"circular\" but this looks better, it should be (0.075, 0.82, 0.165, 1)\r\n\t\t\tfn: function (k) {\r\n\t\t\t\treturn Math.sqrt( 1 - ( --k * k ) );\r\n\t\t\t}\r\n\t\t},\r\n\t\tback: {\r\n\t\t\tstyle: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\tvar b = 4;\r\n\t\t\t\treturn ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbounce: {\r\n\t\t\tstyle: '',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\tif ( ( k /= 1 ) < ( 1 / 2.75 ) ) {\r\n\t\t\t\t\treturn 7.5625 * k * k;\r\n\t\t\t\t} else if ( k < ( 2 / 2.75 ) ) {\r\n\t\t\t\t\treturn 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\r\n\t\t\t\t} else if ( k < ( 2.5 / 2.75 ) ) {\r\n\t\t\t\t\treturn 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\telastic: {\r\n\t\t\tstyle: '',\r\n\t\t\tfn: function (k) {\r\n\t\t\t\tvar f = 0.22,\r\n\t\t\t\t\te = 0.4;\r\n\r\n\t\t\t\tif ( k === 0 ) { return 0; }\r\n\t\t\t\tif ( k == 1 ) { return 1; }\r\n\r\n\t\t\t\treturn ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tme.tap = function (e, eventName) {\r\n\t\tvar ev = document.createEvent('Event');\r\n\t\tev.initEvent(eventName, true, true);\r\n\t\tev.pageX = e.pageX;\r\n\t\tev.pageY = e.pageY;\r\n\t\te.target.dispatchEvent(ev);\r\n\t};\r\n\r\n\tme.click = function (e) {\r\n\t\tvar target = e.target,\r\n\t\t\tev;\r\n\r\n\t\tif ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {\r\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/initMouseEvent\r\n\t\t\t// initMouseEvent is deprecated.\r\n\t\t\tev = document.createEvent(window.MouseEvent ? 'MouseEvents' : 'Event');\r\n\t\t\tev.initEvent('click', true, true);\r\n\t\t\tev.view = e.view || window;\r\n\t\t\tev.detail = 1;\r\n\t\t\tev.screenX = target.screenX || 0;\r\n\t\t\tev.screenY = target.screenY || 0;\r\n\t\t\tev.clientX = target.clientX || 0;\r\n\t\t\tev.clientY = target.clientY || 0;\r\n\t\t\tev.ctrlKey = !!e.ctrlKey;\r\n\t\t\tev.altKey = !!e.altKey;\r\n\t\t\tev.shiftKey = !!e.shiftKey;\r\n\t\t\tev.metaKey = !!e.metaKey;\r\n\t\t\tev.button = 0;\r\n\t\t\tev.relatedTarget = null;\r\n\t\t\tev._constructed = true;\r\n\t\t\ttarget.dispatchEvent(ev);\r\n\t\t}\r\n\t};\r\n\r\n\tme.getTouchAction = function(eventPassthrough, addPinch) {\r\n\t\tvar touchAction = 'none';\r\n\t\tif ( eventPassthrough === 'vertical' ) {\r\n\t\t\ttouchAction = 'pan-y';\r\n\t\t} else if (eventPassthrough === 'horizontal' ) {\r\n\t\t\ttouchAction = 'pan-x';\r\n\t\t}\r\n\t\tif (addPinch && touchAction != 'none') {\r\n\t\t\t// add pinch-zoom support if the browser supports it, but if not (eg. Chrome <55) do nothing\r\n\t\t\ttouchAction += ' pinch-zoom';\r\n\t\t}\r\n\t\treturn touchAction;\r\n\t};\r\n\r\n\tme.getRect = function(el) {\r\n\t\tif (el instanceof SVGElement) {\r\n\t\t\tvar rect = el.getBoundingClientRect();\r\n\t\t\treturn {\r\n\t\t\t\ttop : rect.top,\r\n\t\t\t\tleft : rect.left,\r\n\t\t\t\twidth : rect.width,\r\n\t\t\t\theight : rect.height\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\ttop : el.offsetTop,\r\n\t\t\t\tleft : el.offsetLeft,\r\n\t\t\t\twidth : el.offsetWidth,\r\n\t\t\t\theight : el.offsetHeight\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\treturn me;\r\n})();\r\nfunction IScroll (el, options) {\r\n\tthis.wrapper = typeof el == 'string' ? document.querySelector(el) : el;\r\n\tthis.scroller = this.wrapper.children[0];\r\n\tthis.scrollerStyle = this.scroller.style;\t\t// cache style for better performance\r\n\r\n\tthis.options = {\r\n\r\n\t\tresizeScrollbars: true,\r\n\r\n\t\tmouseWheelSpeed: 20,\r\n\r\n\t\tsnapThreshold: 0.334,\r\n\r\n// INSERT POINT: OPTIONS\r\n\t\tdisablePointer : !utils.hasPointer,\r\n\t\tdisableTouch : utils.hasPointer || !utils.hasTouch,\r\n\t\tdisableMouse : utils.hasPointer || utils.hasTouch,\r\n\t\tstartX: 0,\r\n\t\tstartY: 0,\r\n\t\tscrollY: true,\r\n\t\tdirectionLockThreshold: 5,\r\n\t\tmomentum: true,\r\n\r\n\t\tbounce: true,\r\n\t\tbounceTime: 600,\r\n\t\tbounceEasing: '',\r\n\r\n\t\tpreventDefault: true,\r\n\t\tpreventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },\r\n\r\n\t\tHWCompositing: true,\r\n\t\tuseTransition: true,\r\n\t\tuseTransform: true,\r\n\t\tbindToWrapper: typeof window.onmousedown === \"undefined\"\r\n\t};\r\n\r\n\tfor ( var i in options ) {\r\n\t\tthis.options[i] = options[i];\r\n\t}\r\n\r\n\t// Normalize options\r\n\tthis.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';\r\n\r\n\tthis.options.useTransition = utils.hasTransition && this.options.useTransition;\r\n\tthis.options.useTransform = utils.hasTransform && this.options.useTransform;\r\n\r\n\tthis.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;\r\n\tthis.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\r\n\r\n\t// If you want eventPassthrough I have to lock one of the axes\r\n\tthis.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;\r\n\tthis.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;\r\n\r\n\t// With eventPassthrough we also need lockDirection mechanism\r\n\tthis.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\r\n\tthis.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\r\n\r\n\tthis.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;\r\n\r\n\tthis.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;\r\n\r\n\tif ( this.options.tap === true ) {\r\n\t\tthis.options.tap = 'tap';\r\n\t}\r\n\r\n\t// https://github.com/cubiq/iscroll/issues/1029\r\n\tif (!this.options.useTransition && !this.options.useTransform) {\r\n\t\tif(!(/relative|absolute/i).test(this.scrollerStyle.position)) {\r\n\t\t\tthis.scrollerStyle.position = \"relative\";\r\n\t\t}\r\n\t}\r\n\r\n\tif ( this.options.shrinkScrollbars == 'scale' ) {\r\n\t\tthis.options.useTransition = false;\r\n\t}\r\n\r\n\tthis.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;\r\n\r\n// INSERT POINT: NORMALIZATION\r\n\r\n\t// Some defaults\r\n\tthis.x = 0;\r\n\tthis.y = 0;\r\n\tthis.directionX = 0;\r\n\tthis.directionY = 0;\r\n\tthis._events = {};\r\n\r\n// INSERT POINT: DEFAULTS\r\n\r\n\tthis._init();\r\n\tthis.refresh();\r\n\r\n\tthis.scrollTo(this.options.startX, this.options.startY);\r\n\tthis.enable();\r\n}\r\n\r\nIScroll.prototype = {\r\n\tversion: '5.2.0-snapshot',\r\n\r\n\t_init: function () {\r\n\t\tthis._initEvents();\r\n\r\n\t\tif ( this.options.scrollbars || this.options.indicators ) {\r\n\t\t\tthis._initIndicators();\r\n\t\t}\r\n\r\n\t\tif ( this.options.mouseWheel ) {\r\n\t\t\tthis._initWheel();\r\n\t\t}\r\n\r\n\t\tif ( this.options.snap ) {\r\n\t\t\tthis._initSnap();\r\n\t\t}\r\n\r\n\t\tif ( this.options.keyBindings ) {\r\n\t\t\tthis._initKeys();\r\n\t\t}\r\n\r\n// INSERT POINT: _init\r\n\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\tthis._initEvents(true);\r\n\t\tclearTimeout(this.resizeTimeout);\r\n \t\tthis.resizeTimeout = null;\r\n\t\tthis._execEvent('destroy');\r\n\t},\r\n\r\n\t_transitionEnd: function (e) {\r\n\t\tif ( e.target != this.scroller || !this.isInTransition ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._transitionTime();\r\n\t\tif ( !this.resetPosition(this.options.bounceTime) ) {\r\n\t\t\tthis.isInTransition = false;\r\n\t\t\tthis._execEvent('scrollEnd');\r\n\t\t}\r\n\t},\r\n\r\n\t_start: function (e) {\r\n\t\t// React to left mouse button only\r\n\t\tif ( utils.eventType[e.type] != 1 ) {\r\n\t\t  // for button property\r\n\t\t  // http://unixpapa.com/js/mouse.html\r\n\t\t  var button;\r\n\t    if (!e.which) {\r\n\t      /* IE case */\r\n\t      button = (e.button < 2) ? 0 :\r\n\t               ((e.button == 4) ? 1 : 2);\r\n\t    } else {\r\n\t      /* All others */\r\n\t      button = e.button;\r\n\t    }\r\n\t\t\tif ( button !== 0 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar point = e.touches ? e.touches[0] : e,\r\n\t\t\tpos;\r\n\r\n\t\tthis.initiated\t= utils.eventType[e.type];\r\n\t\tthis.moved\t\t= false;\r\n\t\tthis.distX\t\t= 0;\r\n\t\tthis.distY\t\t= 0;\r\n\t\tthis.directionX = 0;\r\n\t\tthis.directionY = 0;\r\n\t\tthis.directionLocked = 0;\r\n\r\n\t\tthis.startTime = utils.getTime();\r\n\r\n\t\tif ( this.options.useTransition && this.isInTransition ) {\r\n\t\t\tthis._transitionTime();\r\n\t\t\tthis.isInTransition = false;\r\n\t\t\tpos = this.getComputedPosition();\r\n\t\t\tthis._translate(Math.round(pos.x), Math.round(pos.y));\r\n\t\t\tthis._execEvent('scrollEnd');\r\n\t\t} else if ( !this.options.useTransition && this.isAnimating ) {\r\n\t\t\tthis.isAnimating = false;\r\n\t\t\tthis._execEvent('scrollEnd');\r\n\t\t}\r\n\r\n\t\tthis.startX    = this.x;\r\n\t\tthis.startY    = this.y;\r\n\t\tthis.absStartX = this.x;\r\n\t\tthis.absStartY = this.y;\r\n\t\tthis.pointX    = point.pageX;\r\n\t\tthis.pointY    = point.pageY;\r\n\r\n\t\tthis._execEvent('beforeScrollStart');\r\n\t},\r\n\r\n\t_move: function (e) {\r\n\t\tif ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.options.preventDefault ) {\t// increases performance on Android? TODO: check!\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar point\t\t= e.touches ? e.touches[0] : e,\r\n\t\t\tdeltaX\t\t= point.pageX - this.pointX,\r\n\t\t\tdeltaY\t\t= point.pageY - this.pointY,\r\n\t\t\ttimestamp\t= utils.getTime(),\r\n\t\t\tnewX, newY,\r\n\t\t\tabsDistX, absDistY;\r\n\r\n\t\tthis.pointX\t\t= point.pageX;\r\n\t\tthis.pointY\t\t= point.pageY;\r\n\r\n\t\tthis.distX\t\t+= deltaX;\r\n\t\tthis.distY\t\t+= deltaY;\r\n\t\tabsDistX\t\t= Math.abs(this.distX);\r\n\t\tabsDistY\t\t= Math.abs(this.distY);\r\n\r\n\t\t// We need to move at least 10 pixels for the scrolling to initiate\r\n\t\tif ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If you are scrolling in one direction lock the other\r\n\t\tif ( !this.directionLocked && !this.options.freeScroll ) {\r\n\t\t\tif ( absDistX > absDistY + this.options.directionLockThreshold ) {\r\n\t\t\t\tthis.directionLocked = 'h';\t\t// lock horizontally\r\n\t\t\t} else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {\r\n\t\t\t\tthis.directionLocked = 'v';\t\t// lock vertically\r\n\t\t\t} else {\r\n\t\t\t\tthis.directionLocked = 'n';\t\t// no lock\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.directionLocked == 'h' ) {\r\n\t\t\tif ( this.options.eventPassthrough == 'vertical' ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else if ( this.options.eventPassthrough == 'horizontal' ) {\r\n\t\t\t\tthis.initiated = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdeltaY = 0;\r\n\t\t} else if ( this.directionLocked == 'v' ) {\r\n\t\t\tif ( this.options.eventPassthrough == 'horizontal' ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else if ( this.options.eventPassthrough == 'vertical' ) {\r\n\t\t\t\tthis.initiated = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tdeltaX = 0;\r\n\t\t}\r\n\r\n\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\r\n\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\r\n\r\n\t\tnewX = this.x + deltaX;\r\n\t\tnewY = this.y + deltaY;\r\n\r\n\t\t// Slow down if outside of the boundaries\r\n\t\tif ( newX > 0 || newX < this.maxScrollX ) {\r\n\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\r\n\t\t}\r\n\t\tif ( newY > 0 || newY < this.maxScrollY ) {\r\n\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthis.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\r\n\t\tthis.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\r\n\r\n\t\tif ( !this.moved ) {\r\n\t\t\tthis._execEvent('scrollStart');\r\n\t\t}\r\n\r\n\t\tthis.moved = true;\r\n\r\n\t\tthis._translate(newX, newY);\r\n\r\n/* REPLACE START: _move */\r\n\r\n\t\tif ( timestamp - this.startTime > 300 ) {\r\n\t\t\tthis.startTime = timestamp;\r\n\t\t\tthis.startX = this.x;\r\n\t\t\tthis.startY = this.y;\r\n\t\t}\r\n\r\n/* REPLACE END: _move */\r\n\r\n\t},\r\n\r\n\t_end: function (e) {\r\n\t\tif ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tvar point = e.changedTouches ? e.changedTouches[0] : e,\r\n\t\t\tmomentumX,\r\n\t\t\tmomentumY,\r\n\t\t\tduration = utils.getTime() - this.startTime,\r\n\t\t\tnewX = Math.round(this.x),\r\n\t\t\tnewY = Math.round(this.y),\r\n\t\t\tdistanceX = Math.abs(newX - this.startX),\r\n\t\t\tdistanceY = Math.abs(newY - this.startY),\r\n\t\t\ttime = 0,\r\n\t\t\teasing = '';\r\n\r\n\t\tthis.isInTransition = 0;\r\n\t\tthis.initiated = 0;\r\n\t\tthis.endTime = utils.getTime();\r\n\r\n\t\t// reset if we are outside of the boundaries\r\n\t\tif ( this.resetPosition(this.options.bounceTime) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(newX, newY);\t// ensures that the last position is rounded\r\n\r\n\t\t// we scrolled less than 10 pixels\r\n\t\tif ( !this.moved ) {\r\n\t\t\tif ( this.options.tap ) {\r\n\t\t\t\tutils.tap(e, this.options.tap);\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.options.click ) {\r\n\t\t\t\tutils.click(e);\r\n\t\t\t}\r\n\r\n\t\t\tthis._execEvent('scrollCancel');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {\r\n\t\t\tthis._execEvent('flick');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// start momentum animation if needed\r\n\t\tif ( this.options.momentum && duration < 300 ) {\r\n\t\t\tmomentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };\r\n\t\t\tmomentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };\r\n\t\t\tnewX = momentumX.destination;\r\n\t\t\tnewY = momentumY.destination;\r\n\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\r\n\t\t\tthis.isInTransition = 1;\r\n\t\t}\r\n\r\n\r\n\t\tif ( this.options.snap ) {\r\n\t\t\tvar snap = this._nearestSnap(newX, newY);\r\n\t\t\tthis.currentPage = snap;\r\n\t\t\ttime = this.options.snapSpeed || Math.max(\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\tMath.min(Math.abs(newX - snap.x), 1000),\r\n\t\t\t\t\t\tMath.min(Math.abs(newY - snap.y), 1000)\r\n\t\t\t\t\t), 300);\r\n\t\t\tnewX = snap.x;\r\n\t\t\tnewY = snap.y;\r\n\r\n\t\t\tthis.directionX = 0;\r\n\t\t\tthis.directionY = 0;\r\n\t\t\teasing = this.options.bounceEasing;\r\n\t\t}\r\n\r\n// INSERT POINT: _end\r\n\r\n\t\tif ( newX != this.x || newY != this.y ) {\r\n\t\t\t// change easing function when scroller goes out of the boundaries\r\n\t\t\tif ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {\r\n\t\t\t\teasing = utils.ease.quadratic;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(newX, newY, time, easing);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._execEvent('scrollEnd');\r\n\t},\r\n\r\n\t_resize: function () {\r\n\t\tvar that = this;\r\n\r\n\t\tclearTimeout(this.resizeTimeout);\r\n\r\n\t\tthis.resizeTimeout = setTimeout(function () {\r\n\t\t\tthat.refresh();\r\n\t\t}, this.options.resizePolling);\r\n\t},\r\n\r\n\tresetPosition: function (time) {\r\n\t\tvar x = this.x,\r\n\t\t\ty = this.y;\r\n\r\n\t\ttime = time || 0;\r\n\r\n\t\tif ( !this.hasHorizontalScroll || this.x > 0 ) {\r\n\t\t\tx = 0;\r\n\t\t} else if ( this.x < this.maxScrollX ) {\r\n\t\t\tx = this.maxScrollX;\r\n\t\t}\r\n\r\n\t\tif ( !this.hasVerticalScroll || this.y > 0 ) {\r\n\t\t\ty = 0;\r\n\t\t} else if ( this.y < this.maxScrollY ) {\r\n\t\t\ty = this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tif ( x == this.x && y == this.y ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(x, y, time, this.options.bounceEasing);\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.enabled = false;\r\n\t},\r\n\r\n\tenable: function () {\r\n\t\tthis.enabled = true;\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tutils.getRect(this.wrapper);\t\t// Force reflow\r\n\r\n\t\tthis.wrapperWidth\t= this.wrapper.clientWidth;\r\n\t\tthis.wrapperHeight\t= this.wrapper.clientHeight;\r\n\r\n\t\tvar rect = utils.getRect(this.scroller);\r\n/* REPLACE START: refresh */\r\n\r\n\t\tthis.scrollerWidth\t= rect.width;\r\n\t\tthis.scrollerHeight\t= rect.height;\r\n\r\n\t\tthis.maxScrollX\t\t= this.wrapperWidth - this.scrollerWidth;\r\n\t\tthis.maxScrollY\t\t= this.wrapperHeight - this.scrollerHeight;\r\n\r\n/* REPLACE END: refresh */\r\n\r\n\t\tthis.hasHorizontalScroll\t= this.options.scrollX && this.maxScrollX < 0;\r\n\t\tthis.hasVerticalScroll\t\t= this.options.scrollY && this.maxScrollY < 0;\r\n\t\t\r\n\t\tif ( !this.hasHorizontalScroll ) {\r\n\t\t\tthis.maxScrollX = 0;\r\n\t\t\tthis.scrollerWidth = this.wrapperWidth;\r\n\t\t}\r\n\r\n\t\tif ( !this.hasVerticalScroll ) {\r\n\t\t\tthis.maxScrollY = 0;\r\n\t\t\tthis.scrollerHeight = this.wrapperHeight;\r\n\t\t}\r\n\r\n\t\tthis.endTime = 0;\r\n\t\tthis.directionX = 0;\r\n\t\tthis.directionY = 0;\r\n\t\t\r\n\t\tif(utils.hasPointer && !this.options.disablePointer) {\r\n\t\t\t// The wrapper should have `touchAction` property for using pointerEvent.\r\n\t\t\tthis.wrapper.style[utils.style.touchAction] = utils.getTouchAction(this.options.eventPassthrough, true);\r\n\r\n\t\t\t// case. not support 'pinch-zoom'\r\n\t\t\t// https://github.com/cubiq/iscroll/issues/1118#issuecomment-270057583\r\n\t\t\tif (!this.wrapper.style[utils.style.touchAction]) {\r\n\t\t\t\tthis.wrapper.style[utils.style.touchAction] = utils.getTouchAction(this.options.eventPassthrough, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.wrapperOffset = utils.offset(this.wrapper);\r\n\r\n\t\tthis._execEvent('refresh');\r\n\r\n\t\tthis.resetPosition();\r\n\r\n// INSERT POINT: _refresh\r\n\r\n\t},\t\r\n\r\n\ton: function (type, fn) {\r\n\t\tif ( !this._events[type] ) {\r\n\t\t\tthis._events[type] = [];\r\n\t\t}\r\n\r\n\t\tthis._events[type].push(fn);\r\n\t},\r\n\r\n\toff: function (type, fn) {\r\n\t\tif ( !this._events[type] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar index = this._events[type].indexOf(fn);\r\n\r\n\t\tif ( index > -1 ) {\r\n\t\t\tthis._events[type].splice(index, 1);\r\n\t\t}\r\n\t},\r\n\r\n\t_execEvent: function (type) {\r\n\t\tif ( !this._events[type] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i = 0,\r\n\t\t\tl = this._events[type].length;\r\n\r\n\t\tif ( !l ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tthis._events[type][i].apply(this, [].slice.call(arguments, 1));\r\n\t\t}\r\n\t},\r\n\r\n\tscrollBy: function (x, y, time, easing) {\r\n\t\tx = this.x + x;\r\n\t\ty = this.y + y;\r\n\t\ttime = time || 0;\r\n\r\n\t\tthis.scrollTo(x, y, time, easing);\r\n\t},\r\n\r\n\tscrollTo: function (x, y, time, easing) {\r\n\t\teasing = easing || utils.ease.circular;\r\n\r\n\t\tthis.isInTransition = this.options.useTransition && time > 0;\r\n\t\tvar transitionType = this.options.useTransition && easing.style;\r\n\t\tif ( !time || transitionType ) {\r\n\t\t\t\tif(transitionType) {\r\n\t\t\t\t\tthis._transitionTimingFunction(easing.style);\r\n\t\t\t\t\tthis._transitionTime(time);\r\n\t\t\t\t}\r\n\t\t\tthis._translate(x, y);\r\n\t\t} else {\r\n\t\t\tthis._animate(x, y, time, easing.fn);\r\n\t\t}\r\n\t},\r\n\r\n\tscrollToElement: function (el, time, offsetX, offsetY, easing) {\r\n\t\tel = el.nodeType ? el : this.scroller.querySelector(el);\r\n\r\n\t\tif ( !el ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar pos = utils.offset(el);\r\n\r\n\t\tpos.left -= this.wrapperOffset.left;\r\n\t\tpos.top  -= this.wrapperOffset.top;\r\n\r\n\t\t// if offsetX/Y are true we center the element to the screen\r\n\t\tvar elRect = utils.getRect(el);\r\n\t\tvar wrapperRect = utils.getRect(this.wrapper);\r\n\t\tif ( offsetX === true ) {\r\n\t\t\toffsetX = Math.round(elRect.width / 2 - wrapperRect.width / 2);\r\n\t\t}\r\n\t\tif ( offsetY === true ) {\r\n\t\t\toffsetY = Math.round(elRect.height / 2 - wrapperRect.height / 2);\r\n\t\t}\r\n\r\n\t\tpos.left -= offsetX || 0;\r\n\t\tpos.top  -= offsetY || 0;\r\n\r\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\r\n\t\tpos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;\r\n\r\n\t\ttime = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;\r\n\r\n\t\tthis.scrollTo(pos.left, pos.top, time, easing);\r\n\t},\r\n\r\n\t_transitionTime: function (time) {\r\n\t\tif (!this.options.useTransition) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttime = time || 0;\r\n\t\tvar durationProp = utils.style.transitionDuration;\r\n\t\tif(!durationProp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.scrollerStyle[durationProp] = time + 'ms';\r\n\r\n\t\tif ( !time && utils.isBadAndroid ) {\r\n\t\t\tthis.scrollerStyle[durationProp] = '0.0001ms';\r\n\t\t\t// remove 0.0001ms\r\n\t\t\tvar self = this;\r\n\t\t\trAF(function() {\r\n\t\t\t\tif(self.scrollerStyle[durationProp] === '0.0001ms') {\r\n\t\t\t\t\tself.scrollerStyle[durationProp] = '0s';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tif ( this.indicators ) {\r\n\t\t\tfor ( var i = this.indicators.length; i--; ) {\r\n\t\t\t\tthis.indicators[i].transitionTime(time);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n// INSERT POINT: _transitionTime\r\n\r\n\t},\r\n\r\n\t_transitionTimingFunction: function (easing) {\r\n\t\tthis.scrollerStyle[utils.style.transitionTimingFunction] = easing;\r\n\r\n\r\n\t\tif ( this.indicators ) {\r\n\t\t\tfor ( var i = this.indicators.length; i--; ) {\r\n\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n// INSERT POINT: _transitionTimingFunction\r\n\r\n\t},\r\n\r\n\t_translate: function (x, y) {\r\n\t\tif ( this.options.useTransform ) {\r\n\r\n/* REPLACE START: _translate */\r\n\r\n\t\t\tthis.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;\r\n\r\n/* REPLACE END: _translate */\r\n\r\n\t\t} else {\r\n\t\t\tx = Math.round(x);\r\n\t\t\ty = Math.round(y);\r\n\t\t\tthis.scrollerStyle.left = x + 'px';\r\n\t\t\tthis.scrollerStyle.top = y + 'px';\r\n\t\t}\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\r\n\tif ( this.indicators ) {\r\n\t\tfor ( var i = this.indicators.length; i--; ) {\r\n\t\t\tthis.indicators[i].updatePosition();\r\n\t\t}\r\n\t}\r\n\r\n\r\n// INSERT POINT: _translate\r\n\r\n\t},\r\n\r\n\t_initEvents: function (remove) {\r\n\t\tvar eventType = remove ? utils.removeEvent : utils.addEvent,\r\n\t\t\ttarget = this.options.bindToWrapper ? this.wrapper : window;\r\n\r\n\t\teventType(window, 'orientationchange', this);\r\n\t\teventType(window, 'resize', this);\r\n\r\n\t\tif ( this.options.click ) {\r\n\t\t\teventType(this.wrapper, 'click', this, true);\r\n\t\t}\r\n\r\n\t\tif ( !this.options.disableMouse ) {\r\n\t\t\teventType(this.wrapper, 'mousedown', this);\r\n\t\t\teventType(target, 'mousemove', this);\r\n\t\t\teventType(target, 'mousecancel', this);\r\n\t\t\teventType(target, 'mouseup', this);\r\n\t\t}\r\n\r\n\t\tif ( utils.hasPointer && !this.options.disablePointer ) {\r\n\t\t\teventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);\r\n\t\t\teventType(target, utils.prefixPointerEvent('pointermove'), this);\r\n\t\t\teventType(target, utils.prefixPointerEvent('pointercancel'), this);\r\n\t\t\teventType(target, utils.prefixPointerEvent('pointerup'), this);\r\n\t\t}\r\n\r\n\t\tif ( utils.hasTouch && !this.options.disableTouch ) {\r\n\t\t\teventType(this.wrapper, 'touchstart', this);\r\n\t\t\teventType(target, 'touchmove', this);\r\n\t\t\teventType(target, 'touchcancel', this);\r\n\t\t\teventType(target, 'touchend', this);\r\n\t\t}\r\n\r\n\t\teventType(this.scroller, 'transitionend', this);\r\n\t\teventType(this.scroller, 'webkitTransitionEnd', this);\r\n\t\teventType(this.scroller, 'oTransitionEnd', this);\r\n\t\teventType(this.scroller, 'MSTransitionEnd', this);\r\n\t},\r\n\r\n\tgetComputedPosition: function () {\r\n\t\tvar matrix = window.getComputedStyle(this.scroller, null),\r\n\t\t\tx, y;\r\n\r\n\t\tif ( this.options.useTransform ) {\r\n\t\t\tmatrix = matrix[utils.style.transform].split(')')[0].split(', ');\r\n\t\t\tx = +(matrix[12] || matrix[4]);\r\n\t\t\ty = +(matrix[13] || matrix[5]);\r\n\t\t} else {\r\n\t\t\tx = +matrix.left.replace(/[^-\\d.]/g, '');\r\n\t\t\ty = +matrix.top.replace(/[^-\\d.]/g, '');\r\n\t\t}\r\n\r\n\t\treturn { x: x, y: y };\r\n\t},\r\n\t_initIndicators: function () {\r\n\t\tvar interactive = this.options.interactiveScrollbars,\r\n\t\t\tcustomStyle = typeof this.options.scrollbars != 'string',\r\n\t\t\tindicators = [],\r\n\t\t\tindicator;\r\n\r\n\t\tvar that = this;\r\n\r\n\t\tthis.indicators = [];\r\n\r\n\t\tif ( this.options.scrollbars ) {\r\n\t\t\t// Vertical scrollbar\r\n\t\t\tif ( this.options.scrollY ) {\r\n\t\t\t\tindicator = {\r\n\t\t\t\t\tel: createDefaultScrollbar('v', interactive, this.options.scrollbars),\r\n\t\t\t\t\tinteractive: interactive,\r\n\t\t\t\t\tdefaultScrollbars: true,\r\n\t\t\t\t\tcustomStyle: customStyle,\r\n\t\t\t\t\tresize: this.options.resizeScrollbars,\r\n\t\t\t\t\tshrink: this.options.shrinkScrollbars,\r\n\t\t\t\t\tfade: this.options.fadeScrollbars,\r\n\t\t\t\t\tlistenX: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\r\n\t\t\t\tindicators.push(indicator);\r\n\t\t\t}\r\n\r\n\t\t\t// Horizontal scrollbar\r\n\t\t\tif ( this.options.scrollX ) {\r\n\t\t\t\tindicator = {\r\n\t\t\t\t\tel: createDefaultScrollbar('h', interactive, this.options.scrollbars),\r\n\t\t\t\t\tinteractive: interactive,\r\n\t\t\t\t\tdefaultScrollbars: true,\r\n\t\t\t\t\tcustomStyle: customStyle,\r\n\t\t\t\t\tresize: this.options.resizeScrollbars,\r\n\t\t\t\t\tshrink: this.options.shrinkScrollbars,\r\n\t\t\t\t\tfade: this.options.fadeScrollbars,\r\n\t\t\t\t\tlistenY: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\r\n\t\t\t\tindicators.push(indicator);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.options.indicators ) {\r\n\t\t\t// TODO: check concat compatibility\r\n\t\t\tindicators = indicators.concat(this.options.indicators);\r\n\t\t}\r\n\r\n\t\tfor ( var i = indicators.length; i--; ) {\r\n\t\t\tthis.indicators.push( new Indicator(this, indicators[i]) );\r\n\t\t}\r\n\r\n\t\t// TODO: check if we can use array.map (wide compatibility and performance issues)\r\n\t\tfunction _indicatorsMap (fn) {\r\n\t\t\tif (that.indicators) {\r\n\t\t\t\tfor ( var i = that.indicators.length; i--; ) {\r\n\t\t\t\t\tfn.call(that.indicators[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.options.fadeScrollbars ) {\r\n\t\t\tthis.on('scrollEnd', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.on('scrollCancel', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade();\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.on('scrollStart', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade(1);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.on('beforeScrollStart', function () {\r\n\t\t\t\t_indicatorsMap(function () {\r\n\t\t\t\t\tthis.fade(1, true);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tthis.on('refresh', function () {\r\n\t\t\t_indicatorsMap(function () {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.on('destroy', function () {\r\n\t\t\t_indicatorsMap(function () {\r\n\t\t\t\tthis.destroy();\r\n\t\t\t});\r\n\r\n\t\t\tdelete this.indicators;\r\n\t\t});\r\n\t},\r\n\r\n\t_initWheel: function () {\r\n\t\tutils.addEvent(this.wrapper, 'wheel', this);\r\n\t\tutils.addEvent(this.wrapper, 'mousewheel', this);\r\n\t\tutils.addEvent(this.wrapper, 'DOMMouseScroll', this);\r\n\r\n\t\tthis.on('destroy', function () {\r\n\t\t\tclearTimeout(this.wheelTimeout);\r\n\t\t\tthis.wheelTimeout = null;\r\n\t\t\tutils.removeEvent(this.wrapper, 'wheel', this);\r\n\t\t\tutils.removeEvent(this.wrapper, 'mousewheel', this);\r\n\t\t\tutils.removeEvent(this.wrapper, 'DOMMouseScroll', this);\r\n\t\t});\r\n\t},\r\n\r\n\t_wheel: function (e) {\r\n\t\tif ( !this.enabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tvar wheelDeltaX, wheelDeltaY,\r\n\t\t\tnewX, newY,\r\n\t\t\tthat = this;\r\n\r\n\t\tif ( this.wheelTimeout === undefined ) {\r\n\t\t\tthat._execEvent('scrollStart');\r\n\t\t}\r\n\r\n\t\t// Execute the scrollEnd event after 400ms the wheel stopped scrolling\r\n\t\tclearTimeout(this.wheelTimeout);\r\n\t\tthis.wheelTimeout = setTimeout(function () {\r\n\t\t\tif(!that.options.snap) {\r\n\t\t\t\tthat._execEvent('scrollEnd');\r\n\t\t\t}\r\n\t\t\tthat.wheelTimeout = undefined;\r\n\t\t}, 400);\r\n\r\n\t\tif ( 'deltaX' in e ) {\r\n\t\t\tif (e.deltaMode === 1) {\r\n\t\t\t\twheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;\r\n\t\t\t\twheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;\r\n\t\t\t} else {\r\n\t\t\t\twheelDeltaX = -e.deltaX;\r\n\t\t\t\twheelDeltaY = -e.deltaY;\r\n\t\t\t}\r\n\t\t} else if ( 'wheelDeltaX' in e ) {\r\n\t\t\twheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;\r\n\t\t\twheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;\r\n\t\t} else if ( 'wheelDelta' in e ) {\r\n\t\t\twheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;\r\n\t\t} else if ( 'detail' in e ) {\r\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twheelDeltaX *= this.options.invertWheelDirection;\r\n\t\twheelDeltaY *= this.options.invertWheelDirection;\r\n\r\n\t\tif ( !this.hasVerticalScroll ) {\r\n\t\t\twheelDeltaX = wheelDeltaY;\r\n\t\t\twheelDeltaY = 0;\r\n\t\t}\r\n\r\n\t\tif ( this.options.snap ) {\r\n\t\t\tnewX = this.currentPage.pageX;\r\n\t\t\tnewY = this.currentPage.pageY;\r\n\r\n\t\t\tif ( wheelDeltaX > 0 ) {\r\n\t\t\t\tnewX--;\r\n\t\t\t} else if ( wheelDeltaX < 0 ) {\r\n\t\t\t\tnewX++;\r\n\t\t\t}\r\n\r\n\t\t\tif ( wheelDeltaY > 0 ) {\r\n\t\t\t\tnewY--;\r\n\t\t\t} else if ( wheelDeltaY < 0 ) {\r\n\t\t\t\tnewY++;\r\n\t\t\t}\r\n\r\n\t\t\tthis.goToPage(newX, newY);\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\r\n\t\tnewY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\r\n\r\n\t\tthis.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\r\n\t\tthis.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\r\n\r\n\t\tif ( newX > 0 ) {\r\n\t\t\tnewX = 0;\r\n\t\t} else if ( newX < this.maxScrollX ) {\r\n\t\t\tnewX = this.maxScrollX;\r\n\t\t}\r\n\r\n\t\tif ( newY > 0 ) {\r\n\t\t\tnewY = 0;\r\n\t\t} else if ( newY < this.maxScrollY ) {\r\n\t\t\tnewY = this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(newX, newY, 0);\r\n\r\n// INSERT POINT: _wheel\r\n\t},\r\n\r\n\t_initSnap: function () {\r\n\t\tthis.currentPage = {};\r\n\r\n\t\tif ( typeof this.options.snap == 'string' ) {\r\n\t\t\tthis.options.snap = this.scroller.querySelectorAll(this.options.snap);\r\n\t\t}\r\n\r\n\t\tthis.on('refresh', function () {\r\n\t\t\tvar i = 0, l,\r\n\t\t\t\tm = 0, n,\r\n\t\t\t\tcx, cy,\r\n\t\t\t\tx = 0, y,\r\n\t\t\t\tstepX = this.options.snapStepX || this.wrapperWidth,\r\n\t\t\t\tstepY = this.options.snapStepY || this.wrapperHeight,\r\n\t\t\t\tel,\r\n\t\t\t\trect;\r\n\r\n\t\t\tthis.pages = [];\r\n\r\n\t\t\tif ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.options.snap === true ) {\r\n\t\t\t\tcx = Math.round( stepX / 2 );\r\n\t\t\t\tcy = Math.round( stepY / 2 );\r\n\r\n\t\t\t\twhile ( x > -this.scrollerWidth ) {\r\n\t\t\t\t\tthis.pages[i] = [];\r\n\t\t\t\t\tl = 0;\r\n\t\t\t\t\ty = 0;\r\n\r\n\t\t\t\t\twhile ( y > -this.scrollerHeight ) {\r\n\t\t\t\t\t\tthis.pages[i][l] = {\r\n\t\t\t\t\t\t\tx: Math.max(x, this.maxScrollX),\r\n\t\t\t\t\t\t\ty: Math.max(y, this.maxScrollY),\r\n\t\t\t\t\t\t\twidth: stepX,\r\n\t\t\t\t\t\t\theight: stepY,\r\n\t\t\t\t\t\t\tcx: x - cx,\r\n\t\t\t\t\t\t\tcy: y - cy\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\ty -= stepY;\r\n\t\t\t\t\t\tl++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tx -= stepX;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tel = this.options.snap;\r\n\t\t\t\tl = el.length;\r\n\t\t\t\tn = -1;\r\n\r\n\t\t\t\tfor ( ; i < l; i++ ) {\r\n\t\t\t\t\trect = utils.getRect(el[i]);\r\n\t\t\t\t\tif ( i === 0 || rect.left <= utils.getRect(el[i-1]).left ) {\r\n\t\t\t\t\t\tm = 0;\r\n\t\t\t\t\t\tn++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( !this.pages[m] ) {\r\n\t\t\t\t\t\tthis.pages[m] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tx = Math.max(-rect.left, this.maxScrollX);\r\n\t\t\t\t\ty = Math.max(-rect.top, this.maxScrollY);\r\n\t\t\t\t\tcx = x - Math.round(rect.width / 2);\r\n\t\t\t\t\tcy = y - Math.round(rect.height / 2);\r\n\r\n\t\t\t\t\tthis.pages[m][n] = {\r\n\t\t\t\t\t\tx: x,\r\n\t\t\t\t\t\ty: y,\r\n\t\t\t\t\t\twidth: rect.width,\r\n\t\t\t\t\t\theight: rect.height,\r\n\t\t\t\t\t\tcx: cx,\r\n\t\t\t\t\t\tcy: cy\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif ( x > this.maxScrollX ) {\r\n\t\t\t\t\t\tm++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);\r\n\r\n\t\t\t// Update snap threshold if needed\r\n\t\t\tif ( this.options.snapThreshold % 1 === 0 ) {\r\n\t\t\t\tthis.snapThresholdX = this.options.snapThreshold;\r\n\t\t\t\tthis.snapThresholdY = this.options.snapThreshold;\r\n\t\t\t} else {\r\n\t\t\t\tthis.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);\r\n\t\t\t\tthis.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.on('flick', function () {\r\n\t\t\tvar time = this.options.snapSpeed || Math.max(\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\tMath.min(Math.abs(this.x - this.startX), 1000),\r\n\t\t\t\t\t\tMath.min(Math.abs(this.y - this.startY), 1000)\r\n\t\t\t\t\t), 300);\r\n\r\n\t\t\tthis.goToPage(\r\n\t\t\t\tthis.currentPage.pageX + this.directionX,\r\n\t\t\t\tthis.currentPage.pageY + this.directionY,\r\n\t\t\t\ttime\r\n\t\t\t);\r\n\t\t});\r\n\t},\r\n\r\n\t_nearestSnap: function (x, y) {\r\n\t\tif ( !this.pages.length ) {\r\n\t\t\treturn { x: 0, y: 0, pageX: 0, pageY: 0 };\r\n\t\t}\r\n\r\n\t\tvar i = 0,\r\n\t\t\tl = this.pages.length,\r\n\t\t\tm = 0;\r\n\r\n\t\t// Check if we exceeded the snap threshold\r\n\t\tif ( Math.abs(x - this.absStartX) < this.snapThresholdX &&\r\n\t\t\tMath.abs(y - this.absStartY) < this.snapThresholdY ) {\r\n\t\t\treturn this.currentPage;\r\n\t\t}\r\n\r\n\t\tif ( x > 0 ) {\r\n\t\t\tx = 0;\r\n\t\t} else if ( x < this.maxScrollX ) {\r\n\t\t\tx = this.maxScrollX;\r\n\t\t}\r\n\r\n\t\tif ( y > 0 ) {\r\n\t\t\ty = 0;\r\n\t\t} else if ( y < this.maxScrollY ) {\r\n\t\t\ty = this.maxScrollY;\r\n\t\t}\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tif ( x >= this.pages[i][0].cx ) {\r\n\t\t\t\tx = this.pages[i][0].x;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tl = this.pages[i].length;\r\n\r\n\t\tfor ( ; m < l; m++ ) {\r\n\t\t\tif ( y >= this.pages[0][m].cy ) {\r\n\t\t\t\ty = this.pages[0][m].y;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( i == this.currentPage.pageX ) {\r\n\t\t\ti += this.directionX;\r\n\r\n\t\t\tif ( i < 0 ) {\r\n\t\t\t\ti = 0;\r\n\t\t\t} else if ( i >= this.pages.length ) {\r\n\t\t\t\ti = this.pages.length - 1;\r\n\t\t\t}\r\n\r\n\t\t\tx = this.pages[i][0].x;\r\n\t\t}\r\n\r\n\t\tif ( m == this.currentPage.pageY ) {\r\n\t\t\tm += this.directionY;\r\n\r\n\t\t\tif ( m < 0 ) {\r\n\t\t\t\tm = 0;\r\n\t\t\t} else if ( m >= this.pages[0].length ) {\r\n\t\t\t\tm = this.pages[0].length - 1;\r\n\t\t\t}\r\n\r\n\t\t\ty = this.pages[0][m].y;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\tpageX: i,\r\n\t\t\tpageY: m\r\n\t\t};\r\n\t},\r\n\r\n\tgoToPage: function (x, y, time, easing) {\r\n\t\teasing = easing || this.options.bounceEasing;\r\n\r\n\t\tif ( x >= this.pages.length ) {\r\n\t\t\tx = this.pages.length - 1;\r\n\t\t} else if ( x < 0 ) {\r\n\t\t\tx = 0;\r\n\t\t}\r\n\r\n\t\tif ( y >= this.pages[x].length ) {\r\n\t\t\ty = this.pages[x].length - 1;\r\n\t\t} else if ( y < 0 ) {\r\n\t\t\ty = 0;\r\n\t\t}\r\n\r\n\t\tvar posX = this.pages[x][y].x,\r\n\t\t\tposY = this.pages[x][y].y;\r\n\r\n\t\ttime = time === undefined ? this.options.snapSpeed || Math.max(\r\n\t\t\tMath.max(\r\n\t\t\t\tMath.min(Math.abs(posX - this.x), 1000),\r\n\t\t\t\tMath.min(Math.abs(posY - this.y), 1000)\r\n\t\t\t), 300) : time;\r\n\r\n\t\tthis.currentPage = {\r\n\t\t\tx: posX,\r\n\t\t\ty: posY,\r\n\t\t\tpageX: x,\r\n\t\t\tpageY: y\r\n\t\t};\r\n\r\n\t\tthis.scrollTo(posX, posY, time, easing);\r\n\t},\r\n\r\n\tnext: function (time, easing) {\r\n\t\tvar x = this.currentPage.pageX,\r\n\t\t\ty = this.currentPage.pageY;\r\n\r\n\t\tx++;\r\n\r\n\t\tif ( x >= this.pages.length && this.hasVerticalScroll ) {\r\n\t\t\tx = 0;\r\n\t\t\ty++;\r\n\t\t}\r\n\r\n\t\tthis.goToPage(x, y, time, easing);\r\n\t},\r\n\r\n\tprev: function (time, easing) {\r\n\t\tvar x = this.currentPage.pageX,\r\n\t\t\ty = this.currentPage.pageY;\r\n\r\n\t\tx--;\r\n\r\n\t\tif ( x < 0 && this.hasVerticalScroll ) {\r\n\t\t\tx = 0;\r\n\t\t\ty--;\r\n\t\t}\r\n\r\n\t\tthis.goToPage(x, y, time, easing);\r\n\t},\r\n\r\n\t_initKeys: function (e) {\r\n\t\t// default key bindings\r\n\t\tvar keys = {\r\n\t\t\tpageUp: 33,\r\n\t\t\tpageDown: 34,\r\n\t\t\tend: 35,\r\n\t\t\thome: 36,\r\n\t\t\tleft: 37,\r\n\t\t\tup: 38,\r\n\t\t\tright: 39,\r\n\t\t\tdown: 40\r\n\t\t};\r\n\t\tvar i;\r\n\r\n\t\t// if you give me characters I give you keycode\r\n\t\tif ( typeof this.options.keyBindings == 'object' ) {\r\n\t\t\tfor ( i in this.options.keyBindings ) {\r\n\t\t\t\tif ( typeof this.options.keyBindings[i] == 'string' ) {\r\n\t\t\t\t\tthis.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.options.keyBindings = {};\r\n\t\t}\r\n\r\n\t\tfor ( i in keys ) {\r\n\t\t\tthis.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];\r\n\t\t}\r\n\r\n\t\tutils.addEvent(window, 'keydown', this);\r\n\r\n\t\tthis.on('destroy', function () {\r\n\t\t\tutils.removeEvent(window, 'keydown', this);\r\n\t\t});\r\n\t},\r\n\r\n\t_key: function (e) {\r\n\t\tif ( !this.enabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar snap = this.options.snap,\t// we are using this alot, better to cache it\r\n\t\t\tnewX = snap ? this.currentPage.pageX : this.x,\r\n\t\t\tnewY = snap ? this.currentPage.pageY : this.y,\r\n\t\t\tnow = utils.getTime(),\r\n\t\t\tprevTime = this.keyTime || 0,\r\n\t\t\tacceleration = 0.250,\r\n\t\t\tpos;\r\n\r\n\t\tif ( this.options.useTransition && this.isInTransition ) {\r\n\t\t\tpos = this.getComputedPosition();\r\n\r\n\t\t\tthis._translate(Math.round(pos.x), Math.round(pos.y));\r\n\t\t\tthis.isInTransition = false;\r\n\t\t}\r\n\r\n\t\tthis.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;\r\n\r\n\t\tswitch ( e.keyCode ) {\r\n\t\t\tcase this.options.keyBindings.pageUp:\r\n\t\t\t\tif ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\r\n\t\t\t\t\tnewX += snap ? 1 : this.wrapperWidth;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewY += snap ? 1 : this.wrapperHeight;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.pageDown:\r\n\t\t\t\tif ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {\r\n\t\t\t\t\tnewX -= snap ? 1 : this.wrapperWidth;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewY -= snap ? 1 : this.wrapperHeight;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.end:\r\n\t\t\t\tnewX = snap ? this.pages.length-1 : this.maxScrollX;\r\n\t\t\t\tnewY = snap ? this.pages[0].length-1 : this.maxScrollY;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.home:\r\n\t\t\t\tnewX = 0;\r\n\t\t\t\tnewY = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.left:\r\n\t\t\t\tnewX += snap ? -1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.up:\r\n\t\t\t\tnewY += snap ? 1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.right:\r\n\t\t\t\tnewX -= snap ? -1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.options.keyBindings.down:\r\n\t\t\t\tnewY -= snap ? 1 : 5 + this.keyAcceleration>>0;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( snap ) {\r\n\t\t\tthis.goToPage(newX, newY);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( newX > 0 ) {\r\n\t\t\tnewX = 0;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t} else if ( newX < this.maxScrollX ) {\r\n\t\t\tnewX = this.maxScrollX;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t}\r\n\r\n\t\tif ( newY > 0 ) {\r\n\t\t\tnewY = 0;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t} else if ( newY < this.maxScrollY ) {\r\n\t\t\tnewY = this.maxScrollY;\r\n\t\t\tthis.keyAcceleration = 0;\r\n\t\t}\r\n\r\n\t\tthis.scrollTo(newX, newY, 0);\r\n\r\n\t\tthis.keyTime = now;\r\n\t},\r\n\r\n\t_animate: function (destX, destY, duration, easingFn) {\r\n\t\tvar that = this,\r\n\t\t\tstartX = this.x,\r\n\t\t\tstartY = this.y,\r\n\t\t\tstartTime = utils.getTime(),\r\n\t\t\tdestTime = startTime + duration;\r\n\r\n\t\tfunction step () {\r\n\t\t\tvar now = utils.getTime(),\r\n\t\t\t\tnewX, newY,\r\n\t\t\t\teasing;\r\n\r\n\t\t\tif ( now >= destTime ) {\r\n\t\t\t\tthat.isAnimating = false;\r\n\t\t\t\tthat._translate(destX, destY);\r\n\r\n\t\t\t\tif ( !that.resetPosition(that.options.bounceTime) ) {\r\n\t\t\t\t\tthat._execEvent('scrollEnd');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tnow = ( now - startTime ) / duration;\r\n\t\t\teasing = easingFn(now);\r\n\t\t\tnewX = ( destX - startX ) * easing + startX;\r\n\t\t\tnewY = ( destY - startY ) * easing + startY;\r\n\t\t\tthat._translate(newX, newY);\r\n\r\n\t\t\tif ( that.isAnimating ) {\r\n\t\t\t\trAF(step);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.isAnimating = true;\r\n\t\tstep();\r\n\t},\r\n\thandleEvent: function (e) {\r\n\t\tswitch ( e.type ) {\r\n\t\t\tcase 'touchstart':\r\n\t\t\tcase 'pointerdown':\r\n\t\t\tcase 'MSPointerDown':\r\n\t\t\tcase 'mousedown':\r\n\t\t\t\tthis._start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchmove':\r\n\t\t\tcase 'pointermove':\r\n\t\t\tcase 'MSPointerMove':\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tthis._move(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchend':\r\n\t\t\tcase 'pointerup':\r\n\t\t\tcase 'MSPointerUp':\r\n\t\t\tcase 'mouseup':\r\n\t\t\tcase 'touchcancel':\r\n\t\t\tcase 'pointercancel':\r\n\t\t\tcase 'MSPointerCancel':\r\n\t\t\tcase 'mousecancel':\r\n\t\t\t\tthis._end(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'orientationchange':\r\n\t\t\tcase 'resize':\r\n\t\t\t\tthis._resize();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'transitionend':\r\n\t\t\tcase 'webkitTransitionEnd':\r\n\t\t\tcase 'oTransitionEnd':\r\n\t\t\tcase 'MSTransitionEnd':\r\n\t\t\t\tthis._transitionEnd(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'wheel':\r\n\t\t\tcase 'DOMMouseScroll':\r\n\t\t\tcase 'mousewheel':\r\n\t\t\t\tthis._wheel(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'keydown':\r\n\t\t\t\tthis._key(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'click':\r\n\t\t\t\tif ( this.enabled && !e._constructed ) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n};\r\nfunction createDefaultScrollbar (direction, interactive, type) {\r\n\tvar scrollbar = document.createElement('div'),\r\n\t\tindicator = document.createElement('div');\r\n\r\n\tif ( type === true ) {\r\n\t\tscrollbar.style.cssText = 'position:absolute;z-index:9999';\r\n\t\tindicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';\r\n\t}\r\n\r\n\tindicator.className = 'iScrollIndicator';\r\n\r\n\tif ( direction == 'h' ) {\r\n\t\tif ( type === true ) {\r\n\t\t\tscrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\r\n\t\t\tindicator.style.height = '100%';\r\n\t\t}\r\n\t\tscrollbar.className = 'iScrollHorizontalScrollbar';\r\n\t} else {\r\n\t\tif ( type === true ) {\r\n\t\t\tscrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\r\n\t\t\tindicator.style.width = '100%';\r\n\t\t}\r\n\t\tscrollbar.className = 'iScrollVerticalScrollbar';\r\n\t}\r\n\r\n\tscrollbar.style.cssText += ';overflow:hidden';\r\n\r\n\tif ( !interactive ) {\r\n\t\tscrollbar.style.pointerEvents = 'none';\r\n\t}\r\n\r\n\tscrollbar.appendChild(indicator);\r\n\r\n\treturn scrollbar;\r\n}\r\n\r\nfunction Indicator (scroller, options) {\r\n\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\r\n\tthis.wrapperStyle = this.wrapper.style;\r\n\tthis.indicator = this.wrapper.children[0];\r\n\tthis.indicatorStyle = this.indicator.style;\r\n\tthis.scroller = scroller;\r\n\r\n\tthis.options = {\r\n\t\tlistenX: true,\r\n\t\tlistenY: true,\r\n\t\tinteractive: false,\r\n\t\tresize: true,\r\n\t\tdefaultScrollbars: false,\r\n\t\tshrink: false,\r\n\t\tfade: false,\r\n\t\tspeedRatioX: 0,\r\n\t\tspeedRatioY: 0\r\n\t};\r\n\r\n\tfor ( var i in options ) {\r\n\t\tthis.options[i] = options[i];\r\n\t}\r\n\r\n\tthis.sizeRatioX = 1;\r\n\tthis.sizeRatioY = 1;\r\n\tthis.maxPosX = 0;\r\n\tthis.maxPosY = 0;\r\n\r\n\tif ( this.options.interactive ) {\r\n\t\tif ( !this.options.disableTouch ) {\r\n\t\t\tutils.addEvent(this.indicator, 'touchstart', this);\r\n\t\t\tutils.addEvent(window, 'touchend', this);\r\n\t\t}\r\n\t\tif ( !this.options.disablePointer ) {\r\n\t\t\tutils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\r\n\t\t\tutils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);\r\n\t\t}\r\n\t\tif ( !this.options.disableMouse ) {\r\n\t\t\tutils.addEvent(this.indicator, 'mousedown', this);\r\n\t\t\tutils.addEvent(window, 'mouseup', this);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( this.options.fade ) {\r\n\t\tthis.wrapperStyle[utils.style.transform] = this.scroller.translateZ;\r\n\t\tvar durationProp = utils.style.transitionDuration;\r\n\t\tif(!durationProp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.wrapperStyle[durationProp] = utils.isBadAndroid ? '0.0001ms' : '0ms';\r\n\t\t// remove 0.0001ms\r\n\t\tvar self = this;\r\n\t\tif(utils.isBadAndroid) {\r\n\t\t\trAF(function() {\r\n\t\t\t\tif(self.wrapperStyle[durationProp] === '0.0001ms') {\r\n\t\t\t\t\tself.wrapperStyle[durationProp] = '0s';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.wrapperStyle.opacity = '0';\r\n\t}\r\n}\r\n\r\nIndicator.prototype = {\r\n\thandleEvent: function (e) {\r\n\t\tswitch ( e.type ) {\r\n\t\t\tcase 'touchstart':\r\n\t\t\tcase 'pointerdown':\r\n\t\t\tcase 'MSPointerDown':\r\n\t\t\tcase 'mousedown':\r\n\t\t\t\tthis._start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchmove':\r\n\t\t\tcase 'pointermove':\r\n\t\t\tcase 'MSPointerMove':\r\n\t\t\tcase 'mousemove':\r\n\t\t\t\tthis._move(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'touchend':\r\n\t\t\tcase 'pointerup':\r\n\t\t\tcase 'MSPointerUp':\r\n\t\t\tcase 'mouseup':\r\n\t\t\tcase 'touchcancel':\r\n\t\t\tcase 'pointercancel':\r\n\t\t\tcase 'MSPointerCancel':\r\n\t\t\tcase 'mousecancel':\r\n\t\t\t\tthis._end(e);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\tif ( this.options.fadeScrollbars ) {\r\n\t\t\tclearTimeout(this.fadeTimeout);\r\n\t\t\tthis.fadeTimeout = null;\r\n\t\t}\r\n\t\tif ( this.options.interactive ) {\r\n\t\t\tutils.removeEvent(this.indicator, 'touchstart', this);\r\n\t\t\tutils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);\r\n\t\t\tutils.removeEvent(this.indicator, 'mousedown', this);\r\n\r\n\t\t\tutils.removeEvent(window, 'touchmove', this);\r\n\t\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\r\n\t\t\tutils.removeEvent(window, 'mousemove', this);\r\n\r\n\t\t\tutils.removeEvent(window, 'touchend', this);\r\n\t\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);\r\n\t\t\tutils.removeEvent(window, 'mouseup', this);\r\n\t\t}\r\n\r\n\t\tif ( this.options.defaultScrollbars && this.wrapper.parentNode ) {\r\n\t\t\tthis.wrapper.parentNode.removeChild(this.wrapper);\r\n\t\t}\r\n\t},\r\n\r\n\t_start: function (e) {\r\n\t\tvar point = e.touches ? e.touches[0] : e;\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\tthis.transitionTime();\r\n\r\n\t\tthis.initiated = true;\r\n\t\tthis.moved = false;\r\n\t\tthis.lastPointX\t= point.pageX;\r\n\t\tthis.lastPointY\t= point.pageY;\r\n\r\n\t\tthis.startTime\t= utils.getTime();\r\n\r\n\t\tif ( !this.options.disableTouch ) {\r\n\t\t\tutils.addEvent(window, 'touchmove', this);\r\n\t\t}\r\n\t\tif ( !this.options.disablePointer ) {\r\n\t\t\tutils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);\r\n\t\t}\r\n\t\tif ( !this.options.disableMouse ) {\r\n\t\t\tutils.addEvent(window, 'mousemove', this);\r\n\t\t}\r\n\r\n\t\tthis.scroller._execEvent('beforeScrollStart');\r\n\t},\r\n\r\n\t_move: function (e) {\r\n\t\tvar point = e.touches ? e.touches[0] : e,\r\n\t\t\tdeltaX, deltaY,\r\n\t\t\tnewX, newY,\r\n\t\t\ttimestamp = utils.getTime();\r\n\r\n\t\tif ( !this.moved ) {\r\n\t\t\tthis.scroller._execEvent('scrollStart');\r\n\t\t}\r\n\r\n\t\tthis.moved = true;\r\n\r\n\t\tdeltaX = point.pageX - this.lastPointX;\r\n\t\tthis.lastPointX = point.pageX;\r\n\r\n\t\tdeltaY = point.pageY - this.lastPointY;\r\n\t\tthis.lastPointY = point.pageY;\r\n\r\n\t\tnewX = this.x + deltaX;\r\n\t\tnewY = this.y + deltaY;\r\n\r\n\t\tthis._pos(newX, newY);\r\n\r\n// INSERT POINT: indicator._move\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t},\r\n\r\n\t_end: function (e) {\r\n\t\tif ( !this.initiated ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.initiated = false;\r\n\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\r\n\t\tutils.removeEvent(window, 'touchmove', this);\r\n\t\tutils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);\r\n\t\tutils.removeEvent(window, 'mousemove', this);\r\n\r\n\t\tif ( this.scroller.options.snap ) {\r\n\t\t\tvar snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\r\n\r\n\t\t\tvar time = this.options.snapSpeed || Math.max(\r\n\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\tMath.min(Math.abs(this.scroller.x - snap.x), 1000),\r\n\t\t\t\t\t\tMath.min(Math.abs(this.scroller.y - snap.y), 1000)\r\n\t\t\t\t\t), 300);\r\n\r\n\t\t\tif ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {\r\n\t\t\t\tthis.scroller.directionX = 0;\r\n\t\t\t\tthis.scroller.directionY = 0;\r\n\t\t\t\tthis.scroller.currentPage = snap;\r\n\t\t\t\tthis.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.moved ) {\r\n\t\t\tthis.scroller._execEvent('scrollEnd');\r\n\t\t}\r\n\t},\r\n\r\n\ttransitionTime: function (time) {\r\n\t\ttime = time || 0;\r\n\t\tvar durationProp = utils.style.transitionDuration;\r\n\t\tif(!durationProp) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.indicatorStyle[durationProp] = time + 'ms';\r\n\r\n\t\tif ( !time && utils.isBadAndroid ) {\r\n\t\t\tthis.indicatorStyle[durationProp] = '0.0001ms';\r\n\t\t\t// remove 0.0001ms\r\n\t\t\tvar self = this;\r\n\t\t\trAF(function() {\r\n\t\t\t\tif(self.indicatorStyle[durationProp] === '0.0001ms') {\r\n\t\t\t\t\tself.indicatorStyle[durationProp] = '0s';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\ttransitionTimingFunction: function (easing) {\r\n\t\tthis.indicatorStyle[utils.style.transitionTimingFunction] = easing;\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tthis.transitionTime();\r\n\r\n\t\tif ( this.options.listenX && !this.options.listenY ) {\r\n\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\r\n\t\t} else if ( this.options.listenY && !this.options.listenX ) {\r\n\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\r\n\t\t} else {\r\n\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\r\n\t\t}\r\n\r\n\t\tif ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {\r\n\t\t\tutils.addClass(this.wrapper, 'iScrollBothScrollbars');\r\n\t\t\tutils.removeClass(this.wrapper, 'iScrollLoneScrollbar');\r\n\r\n\t\t\tif ( this.options.defaultScrollbars && this.options.customStyle ) {\r\n\t\t\t\tif ( this.options.listenX ) {\r\n\t\t\t\t\tthis.wrapper.style.right = '8px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.wrapper.style.bottom = '8px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tutils.removeClass(this.wrapper, 'iScrollBothScrollbars');\r\n\t\t\tutils.addClass(this.wrapper, 'iScrollLoneScrollbar');\r\n\r\n\t\t\tif ( this.options.defaultScrollbars && this.options.customStyle ) {\r\n\t\t\t\tif ( this.options.listenX ) {\r\n\t\t\t\t\tthis.wrapper.style.right = '2px';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.wrapper.style.bottom = '2px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tutils.getRect(this.wrapper);\t// force refresh\r\n\r\n\t\tif ( this.options.listenX ) {\r\n\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\r\n\t\t\tif ( this.options.resize ) {\r\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\r\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tthis.indicatorWidth = this.indicator.clientWidth;\r\n\t\t\t}\r\n\r\n\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\r\n\r\n\t\t\tif ( this.options.shrink == 'clip' ) {\r\n\t\t\t\tthis.minBoundaryX = -this.indicatorWidth + 8;\r\n\t\t\t\tthis.maxBoundaryX = this.wrapperWidth - 8;\r\n\t\t\t} else {\r\n\t\t\t\tthis.minBoundaryX = 0;\r\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\r\n\t\t\t}\r\n\r\n\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\r\n\t\t}\r\n\r\n\t\tif ( this.options.listenY ) {\r\n\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\r\n\t\t\tif ( this.options.resize ) {\r\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\r\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tthis.indicatorHeight = this.indicator.clientHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\r\n\r\n\t\t\tif ( this.options.shrink == 'clip' ) {\r\n\t\t\t\tthis.minBoundaryY = -this.indicatorHeight + 8;\r\n\t\t\t\tthis.maxBoundaryY = this.wrapperHeight - 8;\r\n\t\t\t} else {\r\n\t\t\t\tthis.minBoundaryY = 0;\r\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\r\n\t\t\t}\r\n\r\n\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\r\n\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\r\n\t\t}\r\n\r\n\t\tthis.updatePosition();\r\n\t},\r\n\r\n\tupdatePosition: function () {\r\n\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\r\n\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\r\n\r\n\t\tif ( !this.options.ignoreBoundaries ) {\r\n\t\t\tif ( x < this.minBoundaryX ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\r\n\t\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tx = this.minBoundaryX;\r\n\t\t\t} else if ( x > this.maxBoundaryX ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\r\n\t\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tx = this.maxBoundaryX;\r\n\t\t\t\t}\r\n\t\t\t} else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {\r\n\t\t\t\tthis.width = this.indicatorWidth;\r\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t}\r\n\r\n\t\t\tif ( y < this.minBoundaryY ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\r\n\t\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t\t}\r\n\t\t\t\ty = this.minBoundaryY;\r\n\t\t\t} else if ( y > this.maxBoundaryY ) {\r\n\t\t\t\tif ( this.options.shrink == 'scale' ) {\r\n\t\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\r\n\t\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ty = this.maxBoundaryY;\r\n\t\t\t\t}\r\n\t\t\t} else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {\r\n\t\t\t\tthis.height = this.indicatorHeight;\r\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\tif ( this.scroller.options.useTransform ) {\r\n\t\t\tthis.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;\r\n\t\t} else {\r\n\t\t\tthis.indicatorStyle.left = x + 'px';\r\n\t\t\tthis.indicatorStyle.top = y + 'px';\r\n\t\t}\r\n\t},\r\n\r\n\t_pos: function (x, y) {\r\n\t\tif ( x < 0 ) {\r\n\t\t\tx = 0;\r\n\t\t} else if ( x > this.maxPosX ) {\r\n\t\t\tx = this.maxPosX;\r\n\t\t}\r\n\r\n\t\tif ( y < 0 ) {\r\n\t\t\ty = 0;\r\n\t\t} else if ( y > this.maxPosY ) {\r\n\t\t\ty = this.maxPosY;\r\n\t\t}\r\n\r\n\t\tx = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;\r\n\t\ty = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;\r\n\r\n\t\tthis.scroller.scrollTo(x, y);\r\n\t},\r\n\r\n\tfade: function (val, hold) {\r\n\t\tif ( hold && !this.visible ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tclearTimeout(this.fadeTimeout);\r\n\t\tthis.fadeTimeout = null;\r\n\r\n\t\tvar time = val ? 250 : 500,\r\n\t\t\tdelay = val ? 0 : 300;\r\n\r\n\t\tval = val ? '1' : '0';\r\n\r\n\t\tthis.wrapperStyle[utils.style.transitionDuration] = time + 'ms';\r\n\r\n\t\tthis.fadeTimeout = setTimeout((function (val) {\r\n\t\t\tthis.wrapperStyle.opacity = val;\r\n\t\t\tthis.visible = +val;\r\n\t\t}).bind(this, val), delay);\r\n\t}\r\n};\r\n\r\nIScroll.utils = utils;\r\n\r\nif ( typeof module != 'undefined' && module.exports ) {\r\n\tmodule.exports = IScroll;\r\n} else {\r\n\twindow.IScroll = IScroll;\r\n}\r\n\r\n})(window, document, Math);\r\n"]},"metadata":{},"sourceType":"module"}